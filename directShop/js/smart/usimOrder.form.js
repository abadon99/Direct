 document.domain = 'kt.com';

VALIDATE_NOT_EMPTY_MSG = {};
VALIDATE_NOT_EMPTY_MSG.creditUserName = "고객명을 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.creditAgntNm = "고객명을 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.creditCustJumin = "주민등록번호를 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.creditAgntSsn = "주민등록번호를 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.creditReceiverMobile = "고객 핸드폰 번호를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.feeBank = "은행을 선택하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.billEmailAddr = "명세서 이메일을 입력하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.mnpNowSbsTlcm = "이전 통신사를 선택해주세요";
VALIDATE_NOT_EMPTY_MSG.mobileNum = "현재 핸드폰 번호를 입력하시기 바랍니다";
VALIDATE_NOT_EMPTY_MSG.certifyWay = "번호이동 인증 방식을 선택하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.zipCd = "우편번호를 검색해 주세요.";
VALIDATE_NOT_EMPTY_MSG.mailAdr = "고객 주소를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.dtlAdr = "고객 주소를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.rcvmtrPrsnCntplc = "수령인 연락처 번호를 입력하시기 바랍니다 ";
VALIDATE_NOT_EMPTY_MSG.feeCardAgree = "자동납부 서비스 이용 신청에 동의하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.nonMemPw = "비밀번호를 입력하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.nonMemPw2 = "비밀번호를 입력하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.hopeNumber1 = "희망번호 1순위를 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.hopeNumber2 = "희망번호 2순위를 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.shopStplList = "약관 동의여부를 체크해 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.stplList = "약관 동의여부를 체크해 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.nowPrttlpMsn = "번호이동 인증번호 입력해 주세요";
VALIDATE_NOT_EMPTY_MSG.feeCardNum = "카드번호 첫번째 14자리 이상 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.feeCardDate = "신용카드 유효기간을 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.feeCardNumCg = "카드번호 첫번째 14자리 이상 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.feeCardDateCg = "신용카드 유효기간을 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.feeBank = "은행을 선택하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.feeAccount = "계좌번호를 숫자로 입력해 주세요.";
VALIDATE_NOT_EMPTY_MSG.usimSeq = "유심카드번호를 입력하시기 바랍니다";
VALIDATE_NOT_EMPTY_MSG.usimCaptcha = "그림문자를 입력 하세요.";
VALIDATE_NOT_EMPTY_MSG.cardHomePage = "인증 ID를 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.hopeCaptcha = "보안문자를 입력 하세요.";
VALIDATE_NOT_EMPTY_MSG.creditIssDateVal = "외국인등록증 발급일자를 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.creditNationalityCd = "국적을 선택하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.passAccountReceiverMobile = "핸드폰 번호를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.sharingPhoneNum = "고객 핸드폰 번호를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.creditCardNo = "카드번호를 입력하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.duSimEid = "eSIM 개통할 EID 정보 입력 하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.duSimMainImei = "eSIM 개통할 메인 IMEI 입력 하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.duSimDegitalImei = "eSIM 개통할 디지털 SIM IMEI 입력 하여 주시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.sharingMainPhoneNo = "고객 핸드폰 번호를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.personalIssDate = "발급일자를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.drLicense = "운전면허번호를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.drIssDate = "발급일자를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.captchaInSession = "보안문자를 입력 하시기 바랍니다.";
VALIDATE_NOT_EMPTY_MSG.naverReceiverMobile = "핸드폰 번호를 입력 하시기 바랍니다.";

VALIDATE_NUMBER_MSG = {};
VALIDATE_NUMBER_MSG.creditCustJumin = "주민등록번호를 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.creditAgntSsn = "주민등록번호를 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.creditReceiverMobile = "숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.mobileNum = "현재 핸드폰 번호를 숫자로 입력하시기 바랍니다";
VALIDATE_NUMBER_MSG.rcvmtrPrsnCntplc = "현재 핸드폰 번호를 숫자로 입력하시기 바랍니다";
VALIDATE_NUMBER_MSG.nowPrttlpMsn = "번호이동 인증번호 숫자로 입력해 주세요";
VALIDATE_NUMBER_MSG.feeCardNumCg = "카드번호를  숫자로 입력해 주시기 바랍니다. ";
VALIDATE_NUMBER_MSG.feeCardDateCg = "유효기간을 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.feeAccount = "계좌번호를 숫자로 입력해 주세요.";
VALIDATE_NUMBER_MSG.feeCardNum = "카드번호를  숫자로 입력해 주시기 바랍니다. ";
VALIDATE_NUMBER_MSG.feeCardDate = "유효기간을 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.usimSeq = "유심카드번호를 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.creditIssDateVal = "외국인등록증 발급일자를 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.passAccountReceiverMobile = "핸드폰 번호를 숫자로 입력해 주세요.";
VALIDATE_NUMBER_MSG.sharingPhoneNum = "숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.creditCardNo = "카드번호를 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.duSimEid="숫자만 입력 가능합니다";
VALIDATE_NUMBER_MSG.duSimMainImei="숫자만 입력 가능합니다";
VALIDATE_NUMBER_MSG.duSimDegitalImei="숫자만 입력 가능합니다";
VALIDATE_NUMBER_MSG.hopeNumber1="희망번호를 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.hopeNumber2="희망번호를 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.duSimDegitalImei = "15자리이상 숫자로 입력해 주시기 바랍니다.";
VALIDATE_NUMBER_MSG.sharingMainPhoneNo = "고객 핸드폰 번호를 숫자로 입력하시기 바랍니다";
VALIDATE_NUMBER_MSG.naverReceiverMobile = "핸드폰 번호를 숫자로 입력해 주세요.";


VALIDATE_FIX_MSG = {};
VALIDATE_FIX_MSG.creditReceiverMobile = "10자리이상 숫자로 입력해 주시기 바랍니다.";
VALIDATE_FIX_MSG.rcvmtrPrsnCntplc = "현재 핸드폰 번호를 10자리이상  숫자로 입력하시기 바랍니다";
VALIDATE_FIX_MSG.nonMemPw = "비밀번호를 영문+숫자 10자 이상 입력하시기 바랍니다.";
VALIDATE_FIX_MSG.nonMemPw2 = "비밀번호가 일치하지 않습니다.";
VALIDATE_FIX_MSG.hopeNumber1 = "희망번호 1순위를 4자리 숫자로 입력해 주시기 바랍니다.";
VALIDATE_FIX_MSG.hopeNumber2 = "희망번호 2순위를 4자리 숫자로 입력해 주시기 바랍니다.";
VALIDATE_FIX_MSG.feeCardNumCg = "카드번호를 14자리 이상 숫자로 입력해 주세요. ";
VALIDATE_FIX_MSG.feeCardDateCg = "유효기간을 4자리 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.feeAccount = "계좌번호를 10자리이상 숫자로 입력해 주세요. ";
VALIDATE_FIX_MSG.feeCardNum = "카드번호를 14자리 이상 숫자로 입력해 주세요. ";
VALIDATE_FIX_MSG.feeCardDate = "유효기간을 4자리 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.usimSeq = "13자리 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.usimCaptcha = "그림문자를 6자리 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.hopeCaptcha = "보안문자를 숫자 6자리로 입력 하세요.";
VALIDATE_FIX_MSG.creditIssDateVal = "외국인등록증 발급일자 8자리 숫자로 입력해 주시기 바랍니다.";
VALIDATE_FIX_MSG.sharingPhoneNum = "10자리이상 숫자로 입력해 주시기 바랍니다.";
VALIDATE_FIX_MSG.creditCardNo = "카드번호를 14자리 이상 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.duSimEid = "32자리이상 숫자로 입력해 주시기 바랍니다.";
VALIDATE_FIX_MSG.duSimMainImei = "15자리이상 숫자로 입력해 주시기 바랍니다.";
VALIDATE_FIX_MSG.creditCustJumin = "주민등록번호를 13자리 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.sharingMainPhoneNo = "고객 핸드폰 번호를 10자리이상  숫자로 입력하시기 바랍니다";
VALIDATE_FIX_MSG.personalIssDate = "발급일자를 8자리 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.drLicense = "운전면허번호를 10자리 숫자로 입력해 주세요";
VALIDATE_FIX_MSG.drIssDate = "발급일자를 8자리 숫자로 입력해 주세요";
VALIDATE_FIX_MSG.captchaInSession = "보안문자를 6자리 숫자로 입력해 주세요.";
VALIDATE_FIX_MSG.naverReceiverMobile = "10자리이상 숫자로 입력해 주시기 바랍니다.";

VALIDATE_COMPARE_MSG = {};
VALIDATE_COMPARE_MSG.nonMemPw = "비밀번호를 영문+숫자 10자 이상 입력하시기 바랍니다.";
VALIDATE_COMPARE_MSG.nonMemPw2 = "비밀번호가 일치하지 않습니다.";
VALIDATE_COMPARE_MSG.billEmailAddr = "이메일 형식이 일치하지 않습니다.";
VALIDATE_COMPARE_MSG.hopeNumber1 = "동일한 희망번호 입니다. 다시 입력해 주시기 바랍니다.";


VALIDATE_JUMIN_MSG = {};
VALIDATE_JUMIN_MSG.creditCustJumin = "입력하신 고객정보가 올바르지 않습니다. 다시 확인 후 입력 해주세요.";

var PRE_CHK_SEND_FLAG = false;
var CERT_FLAG = false;
var ACCOUNT_FALG = false;
var isOmdCheck = false;
var movePreAgre_flag = false; //번호이동 확인 버튼

// 카드사홈페이지 주소
cardHomepage = {
	'KB':['https://card.kbcard.com/','https://card.kbcard.com/CXPRISVC0238.cms'],//국민
	'HD':['https://www.hyundaicard.com','https://www.hyundaicard.com/cpa/co/CPACO0401_01.hc'], //현대
	'SH':['https://www.shinhancard.com','https://www.shinhancard.com/conts/person/member/cardConfirm/cardConfirm.jsp'],//신한
	'SS':['https://www.samsungcard.com','https://www.samsungcard.com/personal/customer-service/card-certification/UHPPCC0501M0.jsp'],//삼성
	'LT':['https://www.lottecard.co.kr','https://www.lottecard.co.kr/app/LPLIFDH_V100.lc'],//롯데
	'BC':['https://bccard.com/app/card/MainActn.do','https://bccard.com/app/card/ContentsLinkActn.do?pgm_id=ind1123'], //BC
	'NH':['https://card.nonghyup.com','https://card.nonghyup.com/index_cardProd.html?SE'], //농협
	'HN':['https://www.hanacard.co.kr','https://www.hanacard.co.kr/OPY15900001M.web']//하나
}

$(function(){
	// 모바일일 경우 카드사 홈페이지 인증하기 안보이기
	$(document).on('click','[href="#popup-other-auth"]', function(){
		if(getUserDevice() != 'PC'){
			$('#popup-other-auth .auth-select').addClass('one');
		}else{
			$('#popup-other-auth .auth-select').removeClass('one');
		}
	});
	//신용카드가 없다면 pass + 계좌 인증하기
	$(document).on('click', '#no-card-go', function(e){
		$('#certType').val('PASS_ACCOUNT');
		$('.raw-other').hide();
		$('#terms-check button.btn').text('확인');
		$('.tab-nav.swiper-wrapper > li.active').hide();
		$('#btn-pass').show().find(".tab-anchor").removeAttr("disabled").trigger('click').focus();
		popupClose('#popup-other-auth');
		e.preventDefault();
	});
	//휴대폰이 없다면 카드사 홈페이지 인증하기
	$(document).on('click', '#no-phone-go', function(){
		//카드사 홈페이지 인증하기 셋팅값 입력
		$('#btnCardSelect').data('card',true);
		$('#terms-check button.btn').data('card',false).text('확인');
		//팝업 호출
		popupClose('#popup-other-auth');
		popupOpen('#select-card');
		return false;
	});
	//홈페이지 인증 사전등록 건너뛰기
	$(document).on('click', '#regi-skip', function(){
		popupClose('#popup-homepage-id');
		popupOpen('#terms-check');
		return false;
	});
	//신용카드사 id 등록 진행중  닫기버튼 클릭시 default 값으로 돌리기
	$(document).on('click', '#select-card .content > .btn-close, #popup-homepage-regi .content > .btn-close, #popup-homepage-id .content > .btn-close', function(){
		$('#terms-check button.btn').text('ARS 인증');
		$('#terms-check button.btn').data('card',false)
		$('#btnCardSelect').data('card',false);
		$('[name=select-card]').prop('checked',false);
	});
	//신용카드가 없다면 네이버 인증하기
	$(document).on('click', '#no-cp-naver-go', function(e){
		$('#certType').val('NAVER');
		$('.raw-other').hide();
		$('#terms-check button.btn').text('네이버 인증서 인증');
		$('.tab-nav.swiper-wrapper > li.active').hide();
		$('#btn-naver').show().find(".tab-anchor").removeAttr("disabled").trigger('click').focus();
		popupClose('#popup-other-auth');
		//$("#naverIdLogin_loginButton img").click();
		//e.preventDefault();
	});
	//신용카드로 인증하기 클릭시
	$(document).on('click', '#certCard', function(e){
		$('#certType').val('CREDIT_CARD');
		$('.raw-other').hide();
		$('#terms-check button.btn').text('신용카드 인증');
		$('.tab-nav.swiper-wrapper > li.active').hide();
		$('#btn-card').show().find(".tab-anchor").removeAttr("disabled").trigger('click').focus();
		popupClose('#popup-other-auth');
	});
	//데이터 쉐어링 유의사항 체크박스 클릭 시
	$(document).on("click","#popupDatasharingAgree",function(){
		//인증타입 구별을 위한 변수 선언
		var certType = $('#certType').val();
		//데이터 쉐어링 전 유의사항 팝업 호출
		popupClose("#popup-datasharing-info");
		//약관 팝업 호출
		popupOpen("#terms-check", this);
		if(certType == "CREDIT_CARD"){
			$('#terms-check button.btn').text('ARS 인증');
		}else{
			$('#terms-check button.btn').text('확인');
		}
	});
})

var isReal = false;

$(document).ready(function(){
	controller.init();	//공통
	alignSharing();		//인증방법 default
	//21.11.22 네이버 로그인 세팅
	var naverLogin = new naver.LoginWithNaverId({
		 clientId:"gswH3XmRzHwAbXOMZmK1"
		,callbackUrl: $("#SSL_DOMAIN").val()+"/common/naverSignInfo.do?plusInfo=DIRECT"
		,isPopup:true
		,loginButton:{color:"green",type:3,height:60}
		,callbackHandle:true
	});
	naverLogin.init();

	isReal = $("#SERVER_NAME").val() == 'REAL';

	$("#select-nationality ul.select-list li").hide(); //국적 리스트

	var TAB = {
			init: function( ins ){
				var $tab = $('.ui-tab.fixed'),
					$anchor = $tab.find('.tab-anchor');

				$tab.find('.tab-nav.swiper-wrapper li').each(function(index){
					var thisText = $.trim($(this).text()) + ' 입력화면으로 이동';
					if(index == 0){
						$(this).find('a').attr('aria-label', $.trim($(this).text()) + ', 가입유형선택 이전화면으로 이동');
					}
                    $(this).find('button').attr('aria-label', thisText);
                    $(this).find('button').attr('data-initLabel', thisText);
				});

				$anchor.on('click', function(){

					var $siblings = $(this).closest('li').siblings();
					$siblings.removeClass('active');

					var navSwiper = $(".tab-nav.swiper-wrapper > li.active").find(".tab-anchor").attr("navIdx");

					var insCurentIndex = $(".tab-nav.swiper-wrapper > li.active").index();
					ins.clickedIndex = insCurentIndex;

					var activeIndex = ins.clickedIndex,
						grid = ins.snapGrid,
						limitX = grid[grid.length - 1],
						widthHalf = ins.width / 2,
						itemWidthHalf = ins.slidesSizesGrid[activeIndex] / 2,
						gridX = ins.slidesGrid[activeIndex] - widthHalf + itemWidthHalf,
						translateX = gridX > limitX ? limitX : gridX < 0 ? 0 : gridX;


					$('.tab-nav.swiper-wrapper > li').children().attr({'aria-selected': false,'title':''});
					$('.tab-nav.swiper-wrapper > li').children().eq(insCurentIndex).attr({'aria-selected':true,'title':'선택됨'});

					if($('#tab-con'+navSwiper).hasClass('done')){
						$('#contents footer button').attr('disabled', 'disabled');
					}else{

						if("1" == navSwiper){
							/*$("#certType").val("CREDIT_CARD");*/
							$(".tab-anchor[navidx=2]").parents("li").show();
							$(".tab-anchor[navidx=11]").parents("li").hide();
							$(".tab-anchor[navidx=16]").parents("li").hide();

							inputDim("#tab-con11 .pass-padding:eq(1)");
							inputDimClose("#tab-con11 .pass-padding:eq(0)");

							inputDim("#tab-con16 .pass-padding:eq(1)");
							inputDimClose("#tab-con16 .pass-padding:eq(0)");

							$("#passAccountReceiverMobile").val('');
							$("#rcvmtrPrsnCntplc").val('');
							$("#naverReceiverMobile").val('');

						}else if("5" == navSwiper){
							// 본인인증 후 페이지ID 생성

							controller.ajaxSend({
								cache: false,
								url: '/direct/getPageId.json',
								data: '',
								dataType: "json",
								type: "post",
								async: true,
								isBlock: true,
								isDim: true,

								successCall: function (jsonObj) {
									$('#pageId').val(jsonObj.pageId);
								}
							});

							/*
							$("#btnOrder").show();
							$("#btnNext").hide();
							$("#btnNext2").hide();
							*/

							$("#btnOrder").removeClass("hidden");
							$("#btnNext").addClass("hidden");
							$("#btnNext2").addClass("hidden");

						}else{
							/*
							$("#btnOrder").hide();
							$("#btnNext2").hide();
							$("#btnNext").show();
							*/

							$("#btnOrder").addClass("hidden");
							$("#btnNext2").addClass("hidden");
							$("#btnNext").removeClass("hidden");
						}

						$('#contents footer button').removeAttr('disabled');
					}

					ins.setTransition(500);
					ins.setTranslate(-translateX);
				});
				$tab.find('.tab-nav.swiper-wrapper li').children().attr({'aria-selected':false,'title':''});
				$tab.find('.tab-nav.swiper-wrapper li.active').children().attr({'aria-selected':true,'title':'선택됨'});
			},
		}


	var swiper = new Swiper('#top-tab', {
		slidesPerView: 'auto',
		freeMode: true,
		scrollbar: {
			el: '.swiper-scrollbar',
			draggable: true,
			hide: true,
		},
		mousewheel: true,
	});

	TAB.init(swiper);


	/* 210826 반영
	 * 데이터쉐어링은 기존 로직대로
	 * 나머지는 3개탭으로 인증강화
	 * */
	//if('Y' != $("#sharingYn").val() ){

/*
		$("#parentsChk2").on('change',function(e){
			var chk = $(this).is(":checked");
			if(chk) {
				//미성년자는 데이터쉐어링 가입 불가
				if( 'Y' == $("#sharingYn").val()){
					alert("미성년자는 가입이 불가능한 상품입니다.");
				//	return;
				}

				$(".credit-nav").hide();
				$('.credit-nav li a').eq(0).trigger('click');
				$(".parents-name").show();
				$("#userType").val("02");
			} else {
				$(".credit-nav").show();
				//$('.credit-nav li a').eq(0).trigger('click');
				$(".parents-name").hide();
				$("#userType").val("01");
			}
		});*/
		/* 210826 반영 */

		$("#tabNavPersonalLi").on('click',function(e){
			fnCreditNavLiClick('personal');
		});
		$("#tabNavDriveLi").on('click',function(e){
			fnCreditNavLiClick('drive');
		});
		$("#tabNavForgnLi").on('click',function(e){
			fnCreditNavLiClick('forgn');
		});

	//}

	// 약관정보 조회
	//controller.getOnlineFormPrdcInfo();

	if("E"== $("#duSimGbnCd").val()){
		controller.eSimListGrp();
	}
	$("#zipCd").on("click", function(){
		goPopup();
	});

});
/**
 * @desc 작업객체
 */
var functionFalg=true;			//최초진입여부

var page = {

	isMuyakjeong : true,	//무약정여부
	supportTypeCd : "03",	//기본 지원금유형코드 : 무약정
	periodCd : "01",	//기본 약정기간코드 : 무약정
	buyTypeCd : "01",	//기본 구매유형코드 : 일반구매

	delivery : "01",	//배송방법(임시) : 택배
	deliveryCode : "01",	//기본 배송방법코드(선택) : 택배

	deliveryLayerYn : false,	//배송방법 레이어에서 진입한건지 여부
	pplTableLayerYn : false,	//요금제표 레이어로 진입할지 여부


	pplLimitYn : false,	//무한데이터 요금제 이용약관 여부
	pplList : [],	//요금제목록
	pplRcmdList : [],	//상품카테고리에 맵핑된 추천요금제 목록
	pplRcmdUserList : [],	//사용자가 사용하고 있는 요금제 및 선택한 요금제 목록
	dfltIdx : "",//추천 기본요금제

	isDefualtPointUse : true, // 첫 포인트 셋팅 여부
	pointLoginPopView : true, // 비회원일 경우 포인트 사용 시 로그인 팝업 노출 여부

	initData : function(){
		page.isMuyakjeong = false;
		page.buyTypeCd = $("#buyTypeCd").val();

		//툴팁
		$("#btnInventory").after($("#toolipInventory"));
		$("#btnToolTipDesc").after($("#txtToolTipDesc"));

		//가입유형, 지원금유형/약정, 상환기간 hidden 값설정
		$("button[name='set'].active").each(function(){
			$("#"+$(this).attr("setNm")).val($(this).attr("setCd"));
		});

		//가입유형 설정
		if($("#boxTypes button[setNm='sbscTypeCd'].active").length<=0){
			$("#boxTypes button[setNm='sbscTypeCd']").eq(0).addClass('active');
		}

	},


	/** @desc Key값 생성 또는 주문데이터 저장 실패시 기존 프로세스 로직 그대로 진행 */
	prodViewLoginPop : function(isOrder) {
		if("true" == isApp) {
			appLoginSend("prodViewAppRtn", "1");
		} else {
			$("a[href=#normal_login]").trigger("click");

		}
	},

}


/** @desc 공통 메세지 관리에서 메세지 코드 PPL로 조회 */
var pplNotice = function(){
	var msg = $("#alertMsg"+$("#pplId").val()).val();
	if(msg!=undefined && msg!=null && msg!=""){
    	alert(msg.replace(/\\n/gi,"\n"));
    }
};



/***************************************************
 * @desc APP에서 리턴 받은 스크립트
 */
var prodViewAppRtn = function(jsonObj,turn) {
	// obj가 공백이면 APP도 비로그인 상태
	if("" == jsonObj) {
		if("1" == turn) {
			$("a[href=#normal_login]").trigger("click");
		} else if("2" == turn) {
    		$("a[href=#normal_login_save]").trigger("click");
            return false;
		}
	} else {
		alert("재 로그인 합니다.");
		apploginprocess(jsonObj, page.getRtnUrl(false));
	}
};
/***************************************************
 * @desc APP에서 리턴 받은 스크립트
 */
var goToNextSwiper = function(titleTxt){
	var $activeTab = $(".tab-nav.swiper-wrapper > li.active");

	//접근성
	$('#contents h1.tit button').focus();

	if(titleTxt != undefined && titleTxt != ''){
		var ariaLabel = $activeTab.children().attr('aria-label');
		$(".tab-nav.swiper-wrapper > li.active").find(".tab-anchor").text(titleTxt);
		$activeTab.children().attr('aria-label', titleTxt + ', 버튼, ' + $activeTab.children().attr('data-initLabel'));
	}

	var $toTab = $activeTab.nextAll("li:visible").first().find(".tab-anchor");
	$toTab.removeAttr("disabled").trigger("click");

	// 작성 완료한 탭은 dim처리
	if($activeTab.find(".tab-anchor").attr("navidx") != '1'){
		inputDim('#tab-con1');
		inputDim('#tab-con'+$activeTab.find(".tab-anchor").attr("navidx"));

		$('#tab-con1').addClass('done');
		$('#tab-con'+$activeTab.find(".tab-anchor").attr("navidx")).addClass('done');
	}

}


/**
 * @desc 공통
 */
var controller = $.extend(new $.CommonObj(),{

	onCreate : function(){

		/** [번호이동 셀프] - 화면 진입시 준셀프 처리 확인 */
		if ($("#selfYn").val() == "N") {
			setSemiSelfData();
		}else{
			$("#hopeNumInArea").hide();
			$("#hopeNumSelArea").show();
		}

		/** [신규가입 셀프] - 희망번호 조회 캡챠 생성 */
		reloadNomalCaptchaMobile('#hopeCaptchaDiv','hopeCaptcha','0');

		/** [신규가입, 번호이동 셀프] - 화면 진입시 캡챠 생성 */
		reloadNomalCaptchaMobile('#usimCaptchaDiv','usimCaptcha','1');

//		controller.getOnlineFormPrdcInfo(); //약관

		// 다음 버튼
		$("#btnNext, #btnOrder, #btnNext2").click(function (e) {

			var navSwiper= $(".tab-nav.swiper-wrapper > li.active").find(".tab-anchor").attr("navIdx");

			if("Y" == $("#nonMemCk").val()){

				//validator.config['nonMemPw'] = 'isNonPassWord';
				//validator.config['nonMemPw2&nonMemPw'] = 'isEquals';

				if (validator.validate()) {
					$("#tab-con5").hide();
					//$("#tab-con6").show();
				}

			}

			if("1" == navSwiper){

				validator.config = {};
				validator.config['creditUserName'] = 'isNonEmpty';
				validator.config['creditCustJumin'] = 'isNumFix13';

				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

				validator.config = {};
				validator.config['creditCustJumin'] = 'isXXNo13';
				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

				/******* 3개탭추가 validation 추가 ********/
				var $activeTab = $(".credit-nav > li.active");
				var checkType = $activeTab.attr("snavIdx");
				var creditUserName = $('#creditUserName').val();
				var creditCustJumin = $('#creditCustJumin').val();

				// 개인
				var personalIssDate = $("#personalIssDate").val();
				var creditAgntNm = $("#creditAgntNm").val();
				var creditAgntSsn = $("#creditAgntSsn").val();
				var userCertifyChk = $("#userCertifyChk").is(":checked");
				var creditAgntRltn = $("#creditAgntRltn").val();//관계
				//var parentsChk2 = $("#parentsChk2").is(":checked");//미성년자 체크

				// 자동차 운전면허
				var drCountrySelect = $("#drCountrySelect").val();//지역
				var drLicense = $("#drLicense").val();
				var drIssDate = $("#drIssDate").val();
				var userCertifyChk2 = $("#userCertifyChk2").is(":checked");

				// 외국인
				var creditNationalityCd = $("#creditNationalityCd").val();
				var creditIssDateVal = $("#creditIssDateVal").val();
				var userCertifyChk3 = $("#userCertifyChk3").is(":checked");

				// 신규가입/번호이동
				var sbscTypeCd = $("#sbscTypeCd").val();

				// 데이터쉐어링은 기존 로직 그대로
				if('02' != $("#userType").val()){
					validator.config = {};


					if(checkType =="personal"){
						//개인
						if( userCertifyChk==false){
							alert("본인조회 동의해주시기 바랍니다.");
							return;
						}
						//미성년자는 데이터쉐어링 가입 불가
						/*
						if(parentsChk2 == true && 'Y' == $("#sharingYn").val()){
							alert("미성년자는 가입이 불가능한 상품입니다.");
							return;
						}*/
						validator.config['personalIssDate'] = 'isNonEmpty';
						validator.config['personalIssDate'] = 'isNumFix8';

					}else if(checkType =="drive"){
						//drive
						if( userCertifyChk2==false){
							alert("본인조회 동의해주시기 바랍니다.");
							return;
						}

						if(drCountrySelect ==""){
							alert("지역선택을 해주세요.");
							return;
						}

						validator.config['drLicense'] = 'isNonEmpty';
						validator.config['drLicense'] = 'isNumFix10';

						validator.config['drIssDate'] = 'isNonEmpty';
						validator.config['drIssDate'] = 'isNumFix8';


					}else{
						// 외국인 forgn
						if( userCertifyChk3==false){
							alert("본인조회 동의해주시기 바랍니다.");
							return;
						}


						if(creditNationalityCd ==""){
							alert("국적을 선택해주세요.");
							return;
						}

						validator.config['creditIssDateVal'] = 'isNonEmpty';
						validator.config['creditIssDateVal'] = 'isNumFix8';

					}


					if (!validator.validate()) {
						alert(validator.getErrorMsg());
						return;
					}
				}
				/******* 3개탭추가 validation 추가 끝 ********/

				var cDate = new Date();
				var currentDate = cDate.format("yyyy") + cDate.format("MM") + cDate.format("dd");
				var age = getAgeByRrn($("#creditCustJumin").val(), currentDate);
				// 데이터쉐어링은 기존 로직 그대로
				if('Y' == $("#sharingYn").val()){

					if ('01' == $("#userType").val() && age < 19) {
						$("#userType").val("02");
							if('Y' == $("#sharingYn").val()){
								//$(".parents-name").hide();
//								$("#parentsChk2").prop("checked", false);
//								$("#parentsChk2").trigger('change');
								alert("미성년자는 가입이 불가능한 상품입니다.");
								return;
							}
						//$(".parents-name").show();
//						$("#parentsChk2").prop("checked", true);
//						$("#parentsChk2").trigger('change');

						if('Y' == $("#sharingYn").val()){
							$("#sharingPhoneDiv").show();
						}

						return;
					}
				}

				if ('02' == $("#userType").val() && age > 19) {
					// 데이터쉐어링은 기존 로직 그대로
					if('Y' == $("#sharingYn").val()){
						$("#userType").val("01");
						$(".parents-name").hide();

						if('Y' == $("#sharingYn").val()){
							$("#sharingPhoneDiv").hide();
						}

						return;
					}else{
						/*
						$("#userType").val("01");
						//$(".parents-name").hide();
						$("#parentsChk2").prop("checked", false);
						$("#parentsChk2").trigger('change');

						if('Y' == $("#sharingYn").val()){
							$("#sharingPhoneDiv").hide();
						}
						*/
						alert("미성년자만 가입이 가능합니다.");
						return;
					}

				}

				// Y주니어ON 요금제 가입 확인
				if('02' == $("#userType").val() && $("#pplId").val()=="0816" && age >= 13) {
					alert("선택하신 요금제는 만 12세 이하만 가입 가능합니다.");
					return;
				}

				if($("#tngrPplYn").val() == 'Y' && $("#userType").val() == '01'){
					alert("해당 요금제는 미성년자만 주문이 가능한 요금제입니다.\n\n\다른 요금제를 선택해주세요.");
					return;
				}

				if ($("#seniorYn").val() == 'Y' && age < 65 ) {
					alert("LTE시니어 요금제는 만65세이상인 경우에만 선택할 수 있습니다.");
					return;
				}

				var jumin = $("#creditCustJumin").val().substring(6,7);


				if ('01' == $("#userType").val() && ("5" == jumin || "6" == jumin || "7" == jumin || "8" == jumin)) {
/*					// 데이터쉐어링은 기존 로직 그대로
					if('Y' == $("#sharingYn").val()){
						$("#userType").val("05");
						$(".foreign-name").show();
						$('#creditCustJuminTemp').attr('placeholder','외국인등록번호');

						return;
					}else{*/
						//	$("#userType").val("05");
					//	$(".foreign-name").show();

					//	$('#creditCustJuminTemp').attr('placeholder','외국인등록번호');
						alert("외국인인 경우 외국인등록증을 선택해주시기 바랍니다.");

						return;

				}

				if ('02' == $("#userType").val()){
					if('Y' == $("#sharingYn").val()){
						validator.config['sharingMainPhoneNo'] = 'isNonEmpty'; //쉐어링 메인회선 번호 추가
					}
					validator.config['creditAgntNm'] = 'isNonEmpty';
					validator.config['creditAgntSsn'] = 'isNumFix13';
				}

				if ("05" == $("#userType").val()) {
					if($("#creditIssDateVal").length > 0) {
						validator.config['creditIssDateVal'] = 'isNumFix8';
					}
					if($("#creditNationalityCd").length > 0) {
						validator.config['creditNationalityCd'] = 'isNonEmpty';
					}
					if($("#creditCustJumin").length > 0) {
						validator.config['creditCustJumin'] = 'isNumFix13';
					}
				}


				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

				if ('02' == $("#userType").val()){
					var age2 = getAgeByRrn($("#creditAgntSsn").val(), currentDate);
					if ( age2 < 19) {
						alert("법정대리인 나이가 19세 이하입니다.");
						return;
					}
				}
				var custNm = $("#creditUserName").val();
				if("02" == $("#userType").val()) {
					custNm = $("#creditAgntNm").val();
				} else {
					custNm = $("#creditUserName").val();
				}

				if(chkNetflixPpl($("#pplId").val())){
					//가입유형 체크
					if(!($("#userType").val()=="01")){
						alert("슈퍼플랜 초이스(넷플릭스) 요금제는 만 19세 이상 개인 고객만 가입 가능합니다.");
						return;
					}
				}

				if(chkDisneyPpl($("#pplId").val())){
					if(!($("#userType").val()=="01")){
						alert("슈퍼플랜 초이스(디즈니+) 요금제는 만 19세 이상 개인 고객만 가입 가능합니다.");
						return;
					}
				}

				// 미성년자는 무조건 준셀프처리
				if("02" == $("#userType").val()) {
					setSemiSelfData();
				}

				// 미성년자 그대로
				if('02' == $("#userType").val()){

					controller.stpltBasList(); //약관

					homePageCardRegi();

					// Y's 요금제 대상자
					var pplId = $("#pplId").val();
					if(isReal) {
						if( age < 30 && ("0817" == pplId || "0818" == pplId) ) {
							popupOpen('#popup-ys-plan-sale');
						} else {
							goToNextSwiper(custNm);
						}
					} else {
						if( age < 30 && ("0813" == pplId || "0814" == pplId) ) {
							popupOpen('#popup-ys-plan-sale');
						} else {
							goToNextSwiper(custNm);
						}
					}
				}else{
					/*
					// 캡차 체크
					validator.config = {};
					validator.config['captchaInSession'] = 'isNonEmpty';
					validator.config['captchaInSession'] = 'isNumFix6';
					if (!validator.validate()) {
						alert(validator.getErrorMsg());
						return;
					}

					var captchaYn = certBotDetectCaptchaForInMyOne(); //이것도 물어봐야함. 그대로써도 될거같기도 함..
					if (captchaYn == 'N') {
						reloadNomalCaptchaImg();
						$("#captchaInSession").val('');
						$("#captchaInSession").focus();
						return;
					}
					*/

					//개인정보 인증
					checkPersonalInfo();
				}

			}else if("2" == navSwiper){//신용카드 인증

				validator.config = {};

				if($("#creditCompnayCd").val() == ''){
					alert("카드사를 선택하세요");
					$('#creditCompnay').focus();
					return;
				}

				if($("#creditCardNo").val() == ''){
					alert("카드번호 를 입력해 주세요.");
					$('#creditCardNoTemp').focus();
					return;
				}

				validator.config['creditReceiverMobile'] = 'isNonEmpty';
				if ($("#creditReceiverMobile").val().indexOf("*") < 0) {
					validator.config['creditReceiverMobile'] = 'isNumBetterFixN10';
				}

				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

				$('#terms-check button.btn').data('card',true);
				//2021.11.22 데이터쉐어링 셀프 관련 유의사항 팝업 호출
				if($('#sharingYn').val() == "Y"){
					//데이터 쉐어링 전 유의사항 팝업 호출
					popupOpen("#popup-datasharing-info");
					//체크박스 선택 해제
					$("#popupDatasharingAgree").prop("checked",false);
				}else{
					popupOpen("#terms-check", this); // $("#terms-check").addClass('active');
					$('#terms-check button.btn').text('ARS 인증');
				}
				//$("#terms-check").addClass('active');

			}else if("7" == navSwiper){
				validator.config = {};

				if ($('#duSimMdlId').val() == '') {
					alert('eSIM 개통할 핸드폰 선택해 주세요.');
					return;
				}

				validator.config['duSimEid'] = 'isNonEmpty';
				validator.config['duSimMainImei'] = 'isNonEmpty';
				validator.config['duSimDegitalImei'] = 'isNonEmpty';
				validator.config['duSimEid'] = 'isNumber';
				validator.config['duSimMainImei'] = 'isNumber';
				validator.config['duSimDegitalImei'] = 'isNumber';



				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}
				if($("#duSimEid").val().length != 32) {
					alert('32자리 숫자로 입력해 주시기 바랍니다.');
					return;
				}
				if($("#duSimMainImei").val().length != 15) {
					alert('15자리 숫자로 입력해 주시기 바랍니다.');
					return;

				}
				if($("#duSimDegitalImei").val().length != 15) {
					alert('15자리 숫자로 입력해 주시기 바랍니다.');
					return;
				}

				var data = controller.getSerializedData({
					duSimDegitalImei: $("#duSimDegitalImei").val()	// esim용 디지털
					, duSimEid: $("#duSimEid").val()  // eId
					, duSimMdlId: $("#duSimMdlId").val() // 단품단말ID
					, duSimMdlNm: $("#duSimMdlNm").val() // 단품 모델명
//					, duSimSntyNm: $("#duSimSntyNm").val() // 단품 용량/색상 저장

				});

				controller.ajaxSend({
					cache: false,
					url: '/smart/chkOmdInsert.json',
					data: data,
					dataType: "json",
					type: "post",
					async: true,
					isBlock: true,
					isDim: true,

					successCall: function (jsonObj) {
						if (jsonObj.result == 'Y') {
							isOmdCheck = true;
							alert('정상적으로 개통정보가 등록 완료되었습니다. 신청서를 작성 완료하시면 개통이 진행됩니다.');
							$("#duSimSelf").val("Y");
							goToNextSwiper('eSIM');

						}else if(jsonObj.result == 'N'){

							isOmdCheck = true;
							alert('eSIM핸드폰 등록이 정상적으로 되지 않았습니다. 신청서를 작성 완료하시면 상담원이 확인하여 연락드리겠습니다. ');

							$("#duSimSelf").val("N");
							$("#selfYn").val("N");
							$("#hopeNumInArea").show();
							$("#hopeNumSelArea").hide();
							goToNextSwiper('eSIM');

						}else{
							alert('입력하신 핸드폰은 eSIM 개통이 불가능한 단말입니다.');
							return;
						}
					}
				});

			}else if("3" == navSwiper){
				if($("#sbscTypeCd").val() == '01'){ //신규가입
					if("Y" == $("#selfYn").val()){

						validator.config = {};
						validator.config['rsrvSvcNo'] = 'isNonEmpty';

						if (!validator.validate()) {
							if ($.trim($('#NumberSelect div ul').html()) == "") {
								alert("희망번호를 조회하여 선택해주시기 바랍니다.");
								$("#btnHopeNoSearch").focus();
								return;
							}
							if ($("#rsrvSvcNo").val() == "") {
								alert("희망번호를 선택하여 주시기 바랍니다.");
								$("#btnHopeNoReserve").focus();
								return;
							}
							return;
						}

						goToNextSwiper($('#hopeNoSelected').val());

					}else{ //준셀프
						validator.config = {};

						validator.config['hopeNumber1'] = 'isNumFix4';
						validator.config['hopeNumber2'] = 'isNumFix4';
						validator.config['hopeNumber1&hopeNumber2'] = 'isNotEquals';
						validator.config['hopeNumber1'] = 'isNumber';
						validator.config['hopeNumber2'] = 'isNumber';

						if (!validator.validate()) {
							alert(validator.getErrorMsg());
							return;
						}

						goToNextSwiper("010-****-"+$('#hopeNumber1').val());

					}

				}else{ //번호이동


					validator.config = {};

					validator.config['mnpNowSbsTlcm'] = 'isNonEmpty';
					validator.config['mobileNum'] = 'isNonEmpty';
					validator.config['mobileNum'] = 'isNumBetterFixN10';
					validator.config['certifyWay'] = 'isNonEmpty';

					var athnItemCd = $("#certifyWay").val();				// 인증 항목 코드
					if (athnItemCd != "1") {
						validator.config['nowPrttlpMsn'] = 'isNonEmpty';
						validator.config['nowPrttlpMsn'] = 'isNumFix4';
					}

					if (!validator.validate()) {
						alert(validator.getErrorMsg());
						return;
					}

					if ($("#selfYn").val() == "Y") {
						if (!PRE_CHK_SEND_FLAG) {
							alert("번호이동 사전동의를 진행하시기 바랍니다.");
							return;
						}
					}

					var mobileNumHi = $("#mobileNum").val();

					if(mobileNumHi.length == 10) {
						mobileNumHi = $.trim(mobileNumHi.substring(0, 3)) + "-" + $.trim(mobileNumHi.substring(3, 6)) + "-" + $.trim(mobileNumHi.substring(6, 10));
					} else {
						mobileNumHi = $.trim(mobileNumHi.substring(0, 3)) + "-" + $.trim(mobileNumHi.substring(3, 7)) + "-" + $.trim(mobileNumHi.substring(7, 11));
					}

					goToNextSwiper(mobileNumHi);

				}



			}else if("4" == navSwiper){
				validator.config = {};

				if('Y' == $("#sharingYn").val() && '02' != $("#userType").val()){
					var rdFeePayNm = "통합청구";
				}else{
					var rdFeePayCk = $("#rdFeePayCk").val();
					var rdFeeList = $("#rdFeeList").val();

					var rdfeepay = $("#rdFeePay").val();

					if("A" == rdFeePayCk){
						validator.config['feeCardNum'] = 'isNumBetterFixN14';
						validator.config['feeCardDate'] = 'isNumFix4';

					}else if ("C" == rdFeePayCk) {
						validator.config['feeCardNumCg'] = 'isNumBetterFixN14';
						validator.config['feeCardDateCg'] = 'isNumFix4';

					}else if ("D" == rdFeePayCk) {
						validator.config['feeBank'] = 'isNonEmpty';
						validator.config['feeAccount'] = 'isNumBetterFixN10';

					}

					if ($("#validCardOrBankNum").val() != 'valid') {
						if (rdfeepay == 'C') {
							alert('카드번호 유효성체크를 해주시기 바랍니다.');
							$('#card_effectiveness').focus();
							return;
						} else if (rdfeepay == 'D') {
							alert('계좌번호 유효성체크를 해주시기 바랍니다.');
							$('#bank_effectiveness').focus();
							return;
						}
					}

					if (!$("#feeCardAgree").is(":checked")) {
						alert("자동납부 서비스 이용 신청에 동의하여 주시기 바랍니다.");
						return;
					}

					if("CB" == rdFeeList){
						validator.config['billEmailAddr'] = 'isNonEmpty';
					}


					if (!validator.validate()) {
						alert(validator.getErrorMsg());
						return;
					}

					var rdFeePayaa = $("#rdFeePay").val();
					var rdFeePayNm = "신용카드";
					if("D" == rdFeePayaa){
						rdFeePayNm = "자동이체";
					}else{
						rdFeePayNm = "신용카드";
					}

				}

				goToNextSwiper(rdFeePayNm);

//				if($('#hasLogin').val() == "true"){
					$("#btnNext").attr("disabled","");
					$("#btnOrder").removeClass("hidden");
					$("#btnNext").addClass("hidden");
//				}
				//USIM 구매는 유심배송지
				//ESIM,USIM 개통은 고객주소로 수정해야함
			}else if("5" == navSwiper){
				validator.config = {};
				validator.config['zipCd'] = 'isNonEmpty';
				validator.config['mailAdr'] = 'isNonEmpty';
				validator.config['dtlAdr'] = 'isNonEmpty';
				validator.config['rcvmtrPrsnCntplc'] = 'isNonEmpty';
				if ($("#rcvmtrPrsnCntplc").val().indexOf("*") < 0) {
					validator.config['rcvmtrPrsnCntplc'] = 'isNumBetterFixN10';
				}

				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

				doOrder();

			}else if("8" == navSwiper){ //USIM

					validator.config = {};
					validator.config['usimSeq'] = 'isNumFix13';

					if (!validator.validate()) {
						alert(validator.getErrorMsg());
						return;
					}

					if ($('#usimCertYn').val() != 'Y') {
						alert('유심카드번호 유효성 검사를 해주세요.');
						return;
					}
					//텍스트 수정해야함
					goToNextSwiper("USIM");

					//2021.12.09 데이터 쉐어링일때는 화면이 가입번호 확인 화면으로 넘어가야하기때문에 버튼 값 수정을 위한 분기문 처리
					if("Y" == $("#sharingYn").val()){
						//쉐어링 서비스 이용 번호 하이픈 들어간 값
						var hopeNoSelected = $("#hopeNoSelected").val();
						$("#btnOrder").removeClass("hidden");		//작성 완료 버튼 보여주기
						$("#btnNext").addClass("hidden");			// 확인 버튼 숨기기
						$("#btnNext2").addClass("hidden");
						//쉐어링 서비스 이용 번호 확인란에 회선 번호 넣어주기
						$('.number-confirm-box').text(hopeNoSelected);
					}


			} else if("11" == navSwiper){ // PASS+계좌 인증


				if($("#certType").val() == 'PASS_ACCOUNT'){
					if($('#passAccountReceiverMobile').length>0){
						validator.config['passAccountReceiverMobile'] = 'isNonEmpty';
						validator.config['passAccountReceiverMobile'] = 'isNumber';
					}
				}

				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return false;
				}

				if(controller.nvl($("#rcvmtrPrsnCntplc").val(), '') == ''){
					alert("PASS+계좌 인증을 진행해주세요.");
					return false;
				}

				$("a[name=selRdFeePay][rdfeepayck=A]").parent().hide();
				goToNextSwiper('PASS+계좌 인증');

			} else if("16" == navSwiper){ // 네이버 인증서 인증

				if($("#certType").val() == 'NAVER'){
					if($('#naverReceiverMobile').length>0){
						validator.config['naverReceiverMobile'] = 'isNonEmpty';
						validator.config['naverReceiverMobile'] = 'isNumber';
						validator.config['naverReceiverMobile'] = 'isNumBetterFixN10';
					}
				}

				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return false;
				}
				//2021.12.02 데이터쉐어링 셀프 관련 유의사항 팝업 호출
				if($('#sharingYn').val() == "Y"){
					//데이터 쉐어링 전 유의사항 팝업 호출
					popupOpen("#popup-datasharing-info");
					//체크박스 선택 해제
					$("#popupDatasharingAgree").prop("checked",false);
				}else{
					popupOpen("#terms-check", this);
					//$("#naverIdLogin_loginButton img").click();
					//goToNextSwiper('네이버 인증서 인증');
				}
			}else if("13" == navSwiper){					//가입할 회선 선택
				//2021.12.09 미선택시 alert
				if(!$('[name =disireServiceNum]').is(":checked")){
					alert("데이터 쉐어링 서비스 이용을 원하시는 회선을 선택해주세요.");
					return;
				}

				//선택된 쉐어링 회선 값 넣어주기
				var disireNum = $('[name =disireServiceNum]:checked').val();

				//회선 요금제 구분
				getPplDivCd();

				//쉐어링 요금제 선택으로 이동
				goToNextSwiper(disireNum);

			}else if("14" == navSwiper){					//쉐어링 요금제 선택
				var pplDivCd = "";	//요금제 명칭
				//USIM 번호 체크화면으로 이동
				if(!$('[name =tariff-system-choice]').is(":checked")){
					alert("쉐어링 요금제를 선택해주세요.");
					return;
				}
				goToNextSwiper(pplDivCd);
			}else if("15" == navSwiper){
				doOrder();
			}
		});

		$("a[name='selCreditAgntRltn']").click(function() {
			$("#creditAgntRltn").val($(this).attr("value"));
		});

		/** @납부방법 납부방법 변경 */
		$("a[name='selRdFeePay']").click(function () {
			$("#validCardOrBankNum").val("");

			var rdFeePay = $(this).attr("rdFeePay");
			var rdFeePayCk = $(this).attr("rdFeePayCk");
			$("#rdFeePayCk").val(rdFeePayCk);
			$("#rdFeePay").val(rdFeePay);

			if("A"==rdFeePayCk){
				$(".fee-btn-wrap").addClass('hidden');
			}else{
				$(".fee-btn-wrap").removeClass("hidden");
			}


		});

		/** @납부방법 납부방법 변경 */
		$("input:radio[name='selRdFeeList']").click(function () {
			var rdFeeList = $(this).attr("val");
			$("#rdFeeList").val(rdFeeList);
		});

		$("#certifyWay").change(function () {
			var idx = $("#certifyWay").val();
			if (idx == 1) {
				$("#nowPrttlpMsn").hide();
			}else{
				$("#nowPrttlpMsn").show();
			}

		});
		// 희망번호 조회
		$("#btnHopeNoSearch").click(function (e) {
			e.preventDefault();
			getHopeNoList('');
		});

		// 희망번호 페이지 이동 이전
		$("#btnHopeNoPrev").click(function (e) {
			e.preventDefault();
			getHopeNoList(parseInt(curPage) - 1);
		});

		// 희망번호 페이지 이동 이후
		$("#btnHopeNoNext").click(function (e) {
			e.preventDefault();
			getHopeNoList(parseInt(curPage) + 1);
		});

		$('#btn-sharing').on('click',function(){

			validator.config = {};
			validator.config['sharingPhoneNum'] = 'isNonEmpty';
			validator.config['sharingPhoneNum'] = 'isNumBetterFixN10';

			if (!validator.validate()) {
				alert(validator.getErrorMsg());
				return false;
			}


			$("#sharingMainPhoneNo").val($("#sharingPhoneNum").val());

//			if("PASS_ACCOUNT" == $("#certType").val()){
//				$("#passAccountReceiverMobile").val($("#sharingPhoneNum").val());
//			}else{
//				$("#creditReceiverMobile").val($("#sharingPhoneNum").val());
//			}

			jsonKtsCustSvcList();

		});

		var getHopeNoList = function (parPage) {

			var srchTelNo = $("#txtHopeNoSearch").val();
			$("#ResultNone").hide();
			if (null === srchTelNo || "" === srchTelNo || undefined === srchTelNo) {
				alert("검색할 희망번호를 입력해주세요.");
				$("#txtHopeNoSearch").focus();
				return;
			}

			if ($.trim(srchTelNo).length != 4) {
				alert("검색할 희망번호 4자리 입력 하시기 바랍니다.");
				return;
			}

//			if ($("#CaptchaNumber").css("display") != "none") {
//				alert("캡챠 인증 문자를 입력해주세요.");
//				return false;
//				//}
//			}
			$("#btnHopeNoReserve").attr("disabled", "disabled");
			var wlessSvcNoPurpCd = 'R';
			if ($('#isPrepayUsim').val() == 'true') {
				wlessSvcNoPurpCd = 'I';
			}
			controller.ajaxSend({
				cache: false,
				url: "/smart/callHopeNoList.json",
				data: controller.getSerializedData({
					srchTelNo: srchTelNo
					, dbRetvSeq: parPage
					, rndUid: controller.nvl($("#rndUid").val(), "")
					, wlessSvcNoPurpCd: wlessSvcNoPurpCd
					, vndrNo : $("#vndrNo").val()
				}),
				dataType: "json",
				type: "post",
				async: false,
				successCall: function (jsonObj) {

					if (jsonObj.retCode == "") {
						if ("" === jsonObj.hopeNoList || null === jsonObj.hopeNoList || jsonObj.hopeNoList.length === 0) {
							$("#ResultNone").show();
							$("#NumberSelect .hopeSelect").hide();
							$("#NumberSelect ul").hide();
							$('#NumberSelect div ul').html("");
							$("#NumberSelect .pageBtn").hide();
						} else {
							popupOpen("#select-number"); //$("#select-number").addClass('active');
							setHopeNoList(jsonObj.hopeNoList, jsonObj.listPage);

							$("#select-number .pageBtn").show();
							$("#btnHopeNoReserve").removeAttr("disabled");
						}
					} else if (jsonObj.retCode == "NEED_SELFAUTH") {
						alert(jsonObj.retSbst);
					} else if (jsonObj.retCode == "NEED_CAPTCHA") {
						alert(jsonObj.retSbst);
						reloadNomalCaptchaMobile('#hopeCaptchaDiv','hopeCaptcha','0');
						$("#hopeCaptcha").val("");
						popupOpen("#popup-hope-capture");
					} else if (jsonObj.retCode == "99") {
						$("#selfYn").val("N");
						alert(jsonObj.retSbst.replace(/\\n/gi, '\n'));
					} else if (jsonObj.retSbst.indexOf("희망번호 목록 조회 일 200회 초과") > -1) {
						alert(jsonObj.retSbst);
					} else if (jsonObj.retCode == "ERR") {
						alert(jsonObj.retSbst);
					} else {
						$("#ResultNone").show();
						$("#NumberSelect .hopeSelect").hide();
						$("#NumberSelect .pageBtn").hide();
						$("#NumberSelect ul").hide();
						$('#NumberSelect div ul').html("");
					}
				}
			});

		};

		$(document).on('click', '#btnCardSelect', function() {

			if ($('#select-card div div li input:radio[name=select-card]:checked').length <= 0) {
				alert("카드사를 선택하여 주시기 바랍니다.");
				return false;
			}

			var creditCompnayCd = $('#select-card div div li input:radio[name=select-card]:checked').val();
			var creditCompnay = $('#select-card div div li input:radio[name=select-card]:checked').attr("cardName");

			$("#creditCompnayCd").val(creditCompnayCd);
			$("#creditCompnay").val(creditCompnay);

			$('#button-card').text('카드사선택, ' + creditCompnay);

			if($('#btnCardSelect').data('card')){//신용카드사 아이디 등록일 경우
				//카드사 주소 등록
				$('#go-homepage-regi').attr('href',cardHomepage[creditCompnayCd][1]); //사전등록페이지
				//$('#go-homepage').attr('href',cardHomepage[creditCompnayCd][0]); //홈페이지
				popupClose('#select-card');
				popupOpen('#popup-homepage-id');

			}else{
				//$("#select-card").removeClass('active');
				popupClose('#select-card');

				if(creditCompnayCd == ''){
					$('#opt-2').hide();
					$('#opt-1').hide();
				}else if(creditCompnayCd == 'HD'){
					//현대카드
					setTimeout(function(){
						$('#opt-2').show();
						$('#opt-1').hide();
					},1);
				}else{
					setTimeout(function(){
						$('#opt-1').show();
						$('#opt-2').hide();
					},1);
				}

				var _cardLink = "https://card.ok-name.co.kr/popup/terms/divForm.do?crdCd=#co&trmsCd=#no&userEnvTp=01"
				_cardLinkCo=_cardLink.replace('#co',creditCompnayCd);

				if(creditCompnayCd=="SS"){
					$('.raw-other').hide();
					$('.raw-samsung').show();
				}else{
					$('.raw-other').show();
					$('.raw-samsung').hide();
				}
				var _coClass=".raw-other"
				if( creditCompnayCd == "SS" ){
					var _coClass = ".raw-samsung"
				}


				$('#terms-check '+_coClass+' .go').each(function(i){
					_cardLinkTemp=_cardLinkCo.replace('#no','0'+(i+1));
					$(this).attr('href',_cardLinkTemp);
				});
			}

			return false;

		});


		//카드사 약관
		$('#terms-check .go').on('click',function(e){
			e.preventDefault();
			if($('#creditCompnay').val() == ''){
				alert('카드사를 선택하세요');
				$('#creditCompnay').focus();
				return false;
			}
			window.open($(this).attr('href'),"cardRawMobile", "width=400,height=500,scrollbar=yes");

		});

		$('#amex-check').on('click',function(){ //다이너스 카드 체크시
			if($(this).prop('checked') == true){
				$('#creditCardNoTemp').attr('maxlength',14).attr('title','14자리 입력');
				$('#aCardCheck').val('02');
			}else{
				$('#creditCardNoTemp').attr('maxlength',16).attr('title','16자리 입력');
				$('#aCardCheck').val('00');
			}

		});

		$('#diners-check').on('click',function(){ //아멕스 카드 체크시
			if($(this).prop('checked') == true){
				$('#creditCardNoTemp').attr('maxlength',15).attr('title','15자리 입력');
				$('#aCardCheck').val('01');
			}else{
				$('#creditCardNoTemp').attr('maxlength',16).attr('title','16자리 입력');
				$('#aCardCheck').val('00');
			}

		});


		$("#checkEr").on('click',function(){
			popupClose("#ars-checkEr"); //$("#ars-checkEr").removeClass('active');
		});

		// 은행/증권사 선택
		$("#btnBankSelect").click(function () {

			var selectBank = $('#select-bank div div div li.active').text();

			if("은행" == selectBank){
				if ($('#select-bank div div li input:radio[name=select-bank]:checked').length <= 0) {
					alert("은행을 선택하여 주시기 바랍니다.");
					return;
				}

				$("#nstepValue").val($('#select-bank div div li input:radio[name=select-bank]:checked').attr("nstepvalue"));
				$("#feeBank").val($('#select-bank div div li input:radio[name=select-bank]:checked').attr("bankName"));
				$("#feeBankCd").val($('#select-bank div div li input:radio[name=select-bank]:checked').attr("value"));

			}else if("증권사" == selectBank){
				if ($('#select-bank div div li input:radio[name=select-stock]:checked').length <= 0) {
					alert("은행을 선택하여 주시기 바랍니다.");
					return;
				}

				$("#nstepValue").val($('#select-bank div div li input:radio[name=select-stock]:checked').attr("nstepvalue"));
				$("#feeBank").val($('#select-bank div div li input:radio[name=select-stock]:checked').attr("bankName"));
				$("#feeBankCd").val($('#select-bank div div li input:radio[name=select-bank]:checked').attr("value"));

			}

			//접근성
			$('#feeBankNm').text('카드사선택, ' + $('#feeBank').val());
			popupClose('#select-bank'); //$("#select-bank").removeClass('active');

		});

		$("#btnHopeNoReserve").click(function () {
			if ($('#select-number div div ul li input:radio[name=rdoHopeNo]:checked').length <= 0) {

				alert("희망번호를 선택하여 주시기 바랍니다.");
				return;
			}
			var hopeNoSelected = $('#select-number div div ul li input:radio[name=rdoHopeNo]:checked').prop("id");
			if (!confirm("선택하신 번호 " + hopeNoSelected + "로 예약하시겠습니까?")) {
				return false;
			}
			controller.ajaxSend({
				cache: false,
				url: "/smart/callHopeNoReserve.json",
				data: controller.getSerializedData({
					rsrvSvcNo: hopeNoSelected
					, rndUid: controller.nvl($("#rndUid").val(), "")
					, vndrNo : $("#vndrNo").val()
				}),
				dataType: "json",
				type: "post",
				async: true,
				successCall: function (jsonObj) {

					if (jsonObj.retCode == "") {
						$("#rsrvSvcNo").val(jsonObj.svcRetDto.rsrvSvcNo.replace(/-/gi, ''));
						alert("선택하신 번호(" + hopeNoSelected + ")를 예약하셨습니다.");
						$("#hopeNumSelected").show();
						//setHopeNoSelection()
						$("#hopeNoSelected").val(hopeNoSelected);
						popupClose("#select-number"); //$("#select-number").removeClass('active');

					} else if (jsonObj.retCode == "99") {
						$("#selfYn").val("N");
						alert(jsonObj.retSbst.replace(/\\n/gi, '\n'));
					} else {
						if (null === jsonObj.retSbst || "" === jsonObj.retSbst) {
							alert("선택하신 번호는 예약할 수 없습니다. 다른 번호를 선택해주세요.");
						} else {
							alert(jsonObj.retSbst);
						}
					}
				}
			});
		});

		//계좌/은행 유효성 체크
		$("#bank_effectiveness, #card_effectiveness").click(function () {

			validator.config = {};
			var birthDate = '';
			var rdFeePay = $("#rdFeePay").val();
			var rdFeePayCk = $("#rdFeePayCk").val();
			var varData = null;
			var userType = $("#userType").val();
			var custNm = "";
			var encCustNm = "";
			var passCk = "N";
			var certType = $("#certType").val();

			// 카드 인증
			if("02" == userType) {
				custNm = $("#creditAgntNm").val();
				encCustNm = $("#enc_creditAgntNm").val();
				birthDate = $("#creditAgntSsn").val().substring(0, 6);
			} else {
				custNm = $("#creditUserName").val();
				encCustNm = $("#enc_creditAgntNm").val();
				birthDate = $("#creditCustJumin").val().substring(0, 6);
			}

			if("A" == rdFeePayCk){
				validator.config['feeCardNum'] = 'isNumBetterFixN14';
				validator.config['feeCardDate'] = 'isNumFix4';
				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

	            //유효기간 유효성체크 현재 날짜
                var nowDate = new Date();
				var nowDateCk = new Date().toISOString().substring(0,2);

                //유효기간 년, 월
                var feeCardDateYear = $("#feeCardDate").val().substring(2,4);
                var feeCardDateMonth = $("#feeCardDate").val().substring(0,2);

                //카드 유효기간 날짜
                var cardDate = new Date();
                cardDate.setFullYear(nowDateCk + feeCardDateYear);
                cardDate.setMonth(parseInt(feeCardDateMonth) - parseInt(1));

                if(cardDate < nowDate || feeCardDateMonth > 12) {
                	alert("신용카드 유효기간을 다시 확인해주세요.");
                	return;
                }

				var crdtCardExpirationDate = controller.nvl($("#feeCardDate").val(), '').substring(2, 4) + $("#feeCardDate").val().substring(0, 2);
				varData = controller.getSerializedData({
					feeBlpymMthd: rdFeePay
					, feeBlpymBankCd: ''
					, crdtCardExpirationDate: crdtCardExpirationDate
					, feeBlpymBnkacn: getRsaEncData($("#feeCardNum").val())
					, custBirthDate: birthDate
					, passCk: passCk
				});

			}else if ("C" == rdFeePayCk) {
				//신용카드
				validator.config['feeCardNumCg'] = 'isNumBetterFixN14';
				validator.config['feeCardDateCg'] = 'isNumFix4';
				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

                //유효기간 유효성체크 현재 날짜
                var nowDate = new Date();
				var nowDateCk = new Date().toISOString().substring(0,2);

                //유효기간 년, 월
                var feeCardDateYear = $("#feeCardDateCg").val().substring(2,4);
                var feeCardDateMonth = $("#feeCardDateCg").val().substring(0,2);

                //카드 유효기간 날짜
                var cardDate = new Date();
                cardDate.setFullYear(nowDateCk + feeCardDateYear);
                cardDate.setMonth(parseInt(feeCardDateMonth) - parseInt(1));

                if(cardDate < nowDate || feeCardDateMonth > 12) {
                	alert("신용카드 유효기간을 다시 확인해주세요.");
                	return;
                }

				var crdtCardExpirationDate = controller.nvl($("#feeCardDateCg").val(), '').substring(2, 4) + $("#feeCardDateCg").val().substring(0, 2);

				varData = controller.getSerializedData({
					feeBlpymMthd: rdFeePay
					, feeBlpymBankCd: ''
					, crdtCardExpirationDate: crdtCardExpirationDate
					, feeBlpymBnkacn: getRsaEncData($("#feeCardNumCg").val())
					, custBirthDate: birthDate
					, passCk: passCk
				});
			} else if ("D" == rdFeePayCk) {
				//자동이체
				validator.config['feeBank'] = 'isNonEmpty';
				validator.config['feeAccount'] = 'isNumBetterFixN10';

				if (!validator.validate()) {
					alert(validator.getErrorMsg());
					return;
				}

				varData = controller.getSerializedData({
					feeBlpymMthd: rdFeePay
					, feeBlpymBankCd: $("#nstepValue").val()
					, feeBlpymBnkacn: $("#feeAccount").val()
					, custBirthDate: birthDate
					, custNm: getRsaEncData(custNm)
					, enc_ovr_custNm : encCustNm
					, passCk: passCk
				});
			}

			controller.ajaxSend({
				cache: false
				, url: '/smart/validCardOrBankNum.json'
				, data: varData
				, dataType: 'json'
				, async: true
				, successCall: function (jsonObj) {

					// 신용카드 인증 후 유효성 체크 시 alert 미노출
					if(controller.rdFeePayType != "view") {
						alert(jsonObj.returnMsg);
					}
					if (jsonObj.returnCd == 'S') {
						$("#validCardOrBankNum").val("valid");
						inputDim('#tab-con4 .parents-name');
						$("#feeCardAgree").removeAttr("disabled");
					} else {
						$("#validCardOrBankNum").val("");
					}
				}
			});

		});

		$("#passPopBtn").click(function(){

			validator.config = {};

			var certType = $("#certType").val();

			if(certType == 'PASS_ACCOUNT'){
				if($('#passAccountReceiverMobile').length>0){
					validator.config['passAccountReceiverMobile'] = 'isNonEmpty';
					validator.config['passAccountReceiverMobile'] = 'isNumber';
				}
			}
			if (!validator.validate()) {
				alert(validator.getErrorMsg());
				return;
			}
			if($('#sharingYn').val() == "Y"){
				//데이터 쉐어링 전 유의사항 팝업 호출
				popupOpen("#popup-datasharing-info");
				//체크박스 선택 해제
				$("#popupDatasharingAgree").prop("checked",false);
			}else{
				popupOpen("#terms-check", this); // $("#terms-check").addClass('active');
			}
		});

		// 약관동의 전체체크
		$("#check-all").click(function() {
			if($("#check-all").is(":checked")) {
				$("#stpltAgreeList").find(":checkbox").prop("checked", true);
			} else {
				$("#stpltAgreeList").find(":checkbox").prop("checked", false);
			}
		});

		// 약관동의 개별 체크
		$("#stpltAgreeList").find(":checkbox").on("click", function(){
			var noChkLen = $("#stpltAgreeList").find(":checkbox").not(":checked").length;
			if($(this).is(":checked")) {
				// 전체 체크가 되어 있는 상태이므로, 개별 약관이 제외 되므로 전체 약관동의 체크 해제
				if(0 == noChkLen) {
					$("#check-all").prop("checked", true);
				}
			} else {
				// 현재 선택하는 약관을 제외한 나머지 약관이 다 선택이 되어 있으면, 해당 함수를 통해 전체 선택이므로 전체 약관동의 체크
				if(0 < noChkLen) {
					$("#check-all").prop("checked", false);
				}
			}

		});

		// [번호이동 셀프] - 사전동의 정보 전송
		$('#movePreAgreSend, #movePreAgreOk').on('click',function(){

			var userType = $("#userType").val();

			var btnFlag = "1";
			var callUrl = "/smart/movePreAgreSend.json";
			if ($(this).attr("id") == "movePreAgreOk") {
				btnFlag = "2";
				callUrl = "/smart/movePreAgreOk.json";
			}

			var athnItemCd = $("#certifyWay").val();				// 인증 항목 코드
			var athnSbst = $("#nowPrttlpMsn").val();				// 인증 내용
			var retvCd = "1";										// 조회 코드 (1:주문요청, 3:단말배송 이후 개통처리)

			validator.config = {};
			validator.config['mobileNum'] = 'isNonEmpty';
			validator.config['mobileNum'] = 'isNumBetterFixN10';
			validator.config['certifyWay'] = 'isNonEmpty';

			// 지로인 경우 내용안받음
			setMoveAlertMsg();
			if (athnItemCd != "1") {
				validator.config['nowPrttlpMsn'] = 'isNonEmpty';
				validator.config['nowPrttlpMsn'] = 'isNumFix4';
			}

			var bchngNpCommCmpnCd = $("#mnpNowSbsTlcm").val();		// 변경전 이동통신사 코드
			var telNo = $("#mobileNum").val();						// 전화번호
			var npCustTypeCd = "01";								// 번호이동고객유형코드 (확인필요)

			var sbscCustNm = "";
			var encSbscCustNm = "";
			var sbscCustIdfyNo = "";

			if(userType == '02'){
				sbscCustNm = $("#creditAgntNm").val();
				sbscCustIdfyNo = $("#creditAgntSsn").val();
				validator.config['creditAgntNm'] = 'isNonEmpty';
				validator.config['creditAgntSsn'] = 'isNumFix13';
			} else {
				sbscCustNm = $("#creditUserName").val();			// 신용카드 이름
				encSbscCustNm = $("#enc_creditUserName").val();
				sbscCustIdfyNo = $("#creditCustJumin").val();		// 신용카드 주민번호
				validator.config['creditUserName'] = 'isNonEmpty';
				validator.config['creditCustJumin'] = 'isNumFix13';			// 신용카드란 주민등록번호
			}

			if(!validator.validate()){
				alert(validator.getErrorMsg());
				if (validator.id == 'certifyWay') {
					$("#aCertifyWay").focus();
				}
				return;
			}

			var varData = controller.getSerializedData({
				bchngNpCommCmpnCd : bchngNpCommCmpnCd
				, telNo : getRsaEncData(telNo)
				, npCustTypeCd : npCustTypeCd
				, sbscCustNm : getRsaEncData(sbscCustNm)
				, enc_ovr_sbscCustNm : encSbscCustNm
				, sbscCustIdfyNo : getRsaEncData(sbscCustIdfyNo)
				, athnItemCd : athnItemCd
				, athnSbst : athnSbst
				, retvCd : retvCd
				, prodCtgCd : $("#prodCtgCd").val()
			});

			controller.ajaxSend({
				cache: false
				, url: callUrl
				, data: varData
				, dataType: 'json'
				, type: 'post'
				, async: true
				, isMsgBlock : true
				, successCall: function (jsonObj) {
					var resultObj = jsonObj.resultObj;
					var sucesYn = resultObj.sucesYn;			// 성공/실패
					var npSndRcvVal = resultObj.npSndRcvVal;	// ARS/SMS 구분
					var callSkipYn = resultObj.callSkipYn;		// 스킵구분
					var cmpnTelNo = resultObj.cmpnTelNo;;		// 전화할 통신사 번호

					//팝업내용 추가....
					var errMsg = resultObj.errMsg;				// 에러 메세지
					var dataChangeYn = resultObj.dataChangeYn;	// 입력값 오류로 재입력상황
					var secTimeOutYn = resultObj.secTimeOutYn;	// 10초 타임아웃
					var semiSelfChangeYn = resultObj.semiSelfChangeYn;	// 준셀프 전환여부

					// 성공
					if (sucesYn == "Y") {
						if (btnFlag == "1") {
							$(".preAgre-active").hide();
							$(".preAgreOk-active").show();
							$("#mobileNum").prop("disabled", true);
							$("#preAgreNoti").show();
							if (null === cmpnTelNo || "" === cmpnTelNo || undefined === cmpnTelNo) {
								$(".sendArsNum").text("이전 사용중인 고객센터");
							}else{
								$(".sendArsNum").text("ARS(" +cmpnTelNo+ ")");
							}

							// 인증 종류 구분값 있는경우만 노출
							if (callSkipYn == "Y") {
								alert("[사전동의 확인] 버튼을 클릭해주세요.");
							} else {
								if ("ARS" == npSndRcvVal) {
									$("#agreeARS").show();
									$("#agreeSMS").hide();
								} else if ("SMS" == npSndRcvVal) {
									$("#agreeARS").hide();
									$("#agreeSMS").show();
								}

								$('#movePreAgreOk').addClass('focusIs'); // 접근성
								popupOpen('#popup-number-change-complete');
							}
						} else {

							//값 채워주고
							alert("사전동의 확인이 완료되었습니다.");
							$(".preAgreOk-active").hide();
							PRE_CHK_SEND_FLAG = true;
							$("#mobileNum").prop("disabled", true);
							$("#nowPrttlpMsn").prop("disabled", true);
							$("#rsrvSvcNo").val(telNo);						// 번호이동 정보 신규예약정보 입력
							$("#npCustTypeCd").val(npCustTypeCd);			// 번호이동 고객유형 입력


						}

					} else if (semiSelfChangeYn == "Y") {
						// 준셀프 전환
						$("#mobileNum").val(telNo);													// 전화번호
						$("#nowPrttlpMsn").val(athnSbst);											// 인증내용

						fnFailProcess(resultObj);

					} else {
						if(!movePreAgre_flag){
							// 실패
							fnFailProcess(resultObj, btnFlag);
						}else{
							alert("번호이동 사전동의 서비스가 원활하지 않습니다. [사전동의 정보전송], [사전동의 확인] 없이 신청서 작성을 완료해주시면 상담원이 연락하여 개통해드리겠습니다.");
							setSemiSelfData();
						}


					}
				}
			});

		});

		// 번이 유심번호 유효성 검사
		$('#usimCertBtn').on('click',function(){
			validator.config = {};

			var sbscTypeCd = $("#sbscTypeCd").val();
			var authType = $("#certType").val();
			var userName = $("#creditUserName").val();
			var custSsn = $("#creditCustJumin").val();

			validator.config['usimSeq'] = 'isNumFix13';

			if (!validator.validate()) {
				alert(validator.getErrorMsg());
				return;
			}

			var intmSeq = '898230' + $('input[name=usimSeq]').val();
			var custTypeCd = '';
			var userType = $("#userType").val();
			if (userType == '05') {
				custTypeCd = '4';
			} else {
				custTypeCd = '1';
			}
			var custIdfyNo = custSsn;
			var custNm = userName;
			var vndrNo = $("#vndrNo").val();

			var data = {
				intmSeq: intmSeq	// 유심번호
				, custTypeCd: custTypeCd // 고객유형코드
				, custIdfyNo: getRsaEncData(custIdfyNo) // 고객식별번호
				, custNm: getRsaEncData(custNm) // 고객명
				, enc_ovr_custNm: $("#enc_creditUserName").val()
				, vndrNo: vndrNo // 대리점코드
				, rndUid: controller.nvl($("#rndUid").val(), "")
			};

			if($("#popup-usim-capture").hasClass("active")){
				validator.config['usimCaptcha'] = 'isNonEmpty';
				validator.config['usimCaptcha'] = 'isNumFix6';

				data['captchaAuthNo'] = $("#usimCaptcha").val();
				data['captchaOrderNo'] = '1';
			}

			data = controller.getSerializedData(data);

			controller.ajaxSend({
				cache: false
				, url: '/smart/postpayUsimCertMNP.json'
				, dataType: 'json'
				, data: data
				, type: 'post'
				, async: false
				, successCall: function (jsonObj) {
					if (jsonObj != null) {
						var preUsimCapchaYn = jsonObj.preUsimCapchaYn; // 이때가팝업...
						var captchaReloadYn = jsonObj.captchaReloadYn; // 번호가 안들어와서 리로드...

						if (captchaReloadYn == "Y") {
							alert("보안문자 입력후 인증이 가능합니다.");
							$("#usimCaptcha").val("");
							reloadNomalCaptchaImg('1');
							popupOpen('#popup-usim-capture');
							return;
						}

						if (preUsimCapchaYn == 'Y') {
							$("#usimCaptcha").val("");
							reloadNomalCaptchaImg('1');
							popupOpen("#popup-usim-capture");
							$('#usimCertYn').val('N');
							return;
						} else {
							popupClose("#popup-usim-capture");
							var ktsUsimInfoChkOutDto = jsonObj.ktsUsimInfoChkOutDto;
							var usePosblYn = ktsUsimInfoChkOutDto.usePosblYn;
							var sttusCd = ktsUsimInfoChkOutDto.sttusCd;
							var intmTypeCd = ktsUsimInfoChkOutDto.intmTypeCd;
							var msgSbst = ktsUsimInfoChkOutDto.msgSbst;
							if (usePosblYn == 'Y') {
								if (intmTypeCd == '3') {
									$('#usimCertYn').val('N');
									alert('고객님, 입력하신 3G 유심카드는 개통이 불가합니다');
								} else {
									$('#usimCertYn').val('Y');
									alert('유심카드번호확인이 완료되었습니다.');
									$("#usimSeq").attr("disabled", "disabled");
									if (intmTypeCd == 'L') { //LTE 유심인경우
										$('#postPayUsimType').val('L');
									}else{ //5G 유심인경우
										$('#postPayUsimType').val('5');
									}
								}

							} else if (usePosblYn == 'N'){
								$('#usimCertYn').val(usePosblYn);
								if (msgSbst == null || msgSbst == 'null' || msgSbst == '') {
									alert('정상적인 유심카드번호가 아닙니다.');
								} else {
									alert(msgSbst);
								}
							}
						}
					} else {
						$('#usimCertYn').val('N');
					}
				}
				, errorCall: function () {
					$('#usimCertYn').val('N');
				}
			});
		});

		//유심 캡챠
		$(document).on('click', "#btnSendCaptchaUsimNo", function () {
			validator.config = {};
			validator.config['usimCaptcha'] = 'isNumFix6';
			if (!validator.validate()) {
				alert(validator.getErrorMsg());
				return;
			}

			var captchaYn = certBotDetectCaptchaForPreorder('usimCaptcha', 1);

			if (captchaYn == "Y") {
				//popupOpen("#popup-usim-capture");
				$('#usimCertBtn').click();
			}else{
				reloadNomalCaptchaMobile('#usimCaptchaDiv','usimCaptcha','1');
				return;
			}
		});

		$(document).on('click', "#btnSendCaptchaHopeNo", function () {

			validator.config = {};
			validator.config['hopeCaptcha'] = 'isNumFix6';
			if (!validator.validate()) {
				alert(validator.getErrorMsg());
				return;
			}

			var captchaYn = certBotDetectCaptchaForPreorder('hopeCaptcha',0);

			if (captchaYn == "Y") {
				getHopeNoList(parseInt(curPage));
				popupClose("#popup-hope-capture");
			}else{
				reloadNomalCaptchaMobile('#hopeCaptchaDiv','hopeCaptcha','0');
				return;
			}
		});

		$(document).on('change', "#sntyInfoSetList", function () {
			var sntyInfoSetListVal = (controller.nvl($(this).val(), "")).split("|");
			$('#duSimMdlId').val(sntyInfoSetListVal[0]);
			$('#duSimMdlNm').val(sntyInfoSetListVal[1]);
		});

		/** 국적 선택 */
		$("#btnNationalitySelect").click(function() {

			if ($('input:radio[name=select-nationality]:checked').length <= 0) {
				alert("국가를 선택하여 주시기 바랍니다.");
				return false;
			}

			var nationName = $('input:radio[name=select-nationality]:checked').attr("nationalityname");
			var nationCd = $('input:radio[name=select-nationality]:checked').val();

			$("#creditNationalityName").val(nationName);
			$("#creditNationalityCd").val(nationCd);

		});


		/** 국적 조회 */
		$("#nationList").click(function() {

			$("#select-nationality ul.select-list li").each(function(){
				  var nationalityName = $(this).find("input").attr("nationalityname").trim().toLowerCase();
				  var searchVal = $("#nationName").val().trim().toLowerCase();

				  if(nationalityName.indexOf(searchVal) > -1){
				    $(this).show();
				  }else{
				    $(this).hide();
				  }
			});



		});

		$("input[data-auto-input]").on("focusin change", function(e) {
			var encName = "enc_" + $(this).attr("name");
			$("input[name=" +encName+ "]").val("");
			if (e.type == "focusin") {
				$(this).val("");
			}
		});

	},

	//유심, 약관정보 조회
	stpltBasList : function () {
		controller.ajaxSend({
			cache: false
			, url: '/direct/listStpltInfo.json'
			, data: controller.getSerializedData({
				sharingYn: $("#sharingYn").val(),
				userType : $("#userType").val(),
				pplId	 : $("#pplId").val()
			})
			, dataType: 'json'
			, type: 'post'
			, async: true
			, successCall: function (jsonObj) {

				/** 약관정보 시작 */
				var stpltBasList = jsonObj.stpltBasList;
				var onlineStpltBasList = jsonObj.onlineStpltBasList;

				$("#stpltAgreeList > ul.terms-list-Shop").empty();
				$("#popup-order-raw-detail").empty();

				var stpltBf = new Array();
				var stpltDtlBf = new Array();
				var stpltDtl = new Array();

				if("N" == $("#sharingYn").val() || ("Y" == $("#sharingYn").val() && "02" == $("#userType").val()) || $('#hasLogin').val() == "false" ){
					for(var i=0; i < stpltBasList.length; i++) {
						var stpltBas = stpltBasList[i];
						var stpltDivNmDtl = "선택";
						/** 샵 필수 */
						if("1" == stpltBas.stpltDivCd) {
							var onlineStplt = "";
							stpltBf.push('<li>');
							stpltBf.push('	<input type="checkbox" id="shopStplList'+stpltBas.stpltNo+'" name="shopStplList" value="'+stpltBas.stpltNo+'" validityyn="Y" '+onlineStplt+' />');
							stpltBf.push('	<label for="shopStplList'+stpltBas.stpltNo+'">[필수]&nbsp;'+stpltBas.stpltNm+'</label>');
							stpltBf.push('	<a href="#agreeView'+stpltBas.stpltNo+'"  class="popup-call agree-view" aria-label="[필수] ' + stpltBas.stpltNm +' 레이어팝업열림" role="button">자세히 보기</a>');
							stpltBf.push('</li>');

							stpltDivNmDtl = "필수";
						}
						/** 샵 상세보기 */
					    stpltDtlBf.push('<div id="agreeView'+stpltBas.stpltNo+'" data-popup="popup-fade" class="popup popup-raw agreeView" aria-hidden="true">');
					    stpltDtlBf.push('	<header>');
					    stpltDtlBf.push('		<h1>'+stpltBas.stpltNm+' ('+stpltDivNmDtl+')</h1>');
					    stpltDtlBf.push('	 </header>');
					    stpltDtlBf.push('	<div class="content">');
					    if("129" == stpltBas.stpltNo) {
						    stpltDtlBf.push(stpltBas.stpltSbst);
					    } else {
						    stpltDtlBf.push('		<p>'+stpltBas.stpltSbst+'</p>');
					    }
					    stpltDtlBf.push('	</div>');
					    stpltDtlBf.push('	<button type="button" class="close" >닫기</button>');
					    stpltDtlBf.push('</div>');
					}
				}

				for(var i=0; i < onlineStpltBasList.length; i++) {
					var onlineStpltBas = onlineStpltBasList[i];
					/** 신청서 필수 */
					if("필수" == onlineStpltBas.stplInd) {
						stpltBf.push('<li>');
						stpltBf.push('	<input type="checkbox" id="stplList'+onlineStpltBas.stplCd+'" name="stplList" value="'+onlineStpltBas.stplCd+'" validityyn="Y" />');
						stpltBf.push('	<label for="stplList'+onlineStpltBas.stplCd+'">[필수]&nbsp;'+onlineStpltBas.stplNm+'</label>');
						stpltBf.push('	<a href="#agreeView'+onlineStpltBas.stplCd+'"  class="popup-call agree-view" aria-label="[필수] ' + onlineStpltBas.stplNm + ' 레이어팝업열림" role="button">자세히 보기</a>');
						stpltBf.push('</li>');
					}

					/** 신청서 상세보기 */
				    stpltDtlBf.push('<div id="agreeView'+onlineStpltBas.stplCd+'" data-popup="popup-fade" class="popup popup-raw agreeView" aria-hidden="true">');
				    stpltDtlBf.push('	<header>');
				    stpltDtlBf.push('		<h1>'+onlineStpltBas.stplNm+' ('+onlineStpltBas.stplInd+')</h1>');
				    stpltDtlBf.push('	 </header>');
				    stpltDtlBf.push('	<div class="content">');
				    stpltDtlBf.push('		<p>'+onlineStpltBas.stplSbst+'</p>');
				    stpltDtlBf.push('	</div>');
				    stpltDtlBf.push('	<button type="button" class="close" >닫기</button>');
				    stpltDtlBf.push('</div>');
				}

				if("N" == $("#sharingYn").val() || ("Y" == $("#sharingYn").val() && "02" == $("#userType").val()) || $('#hasLogin').val() == "false" ){
					for(var i=0; i < stpltBasList.length; i++) {
						var stpltBas = stpltBasList[i];
						/** 샵 선택 */
						if("1" != stpltBas.stpltDivCd) {
							var onlineStplt = "";
							stpltBf.push('<li>');
							stpltBf.push('	<input type="checkbox" id="shopStplList'+stpltBas.stpltNo+'" name="shopStplList" value="'+stpltBas.stpltNo+'" '+onlineStplt+' />');
							stpltBf.push('	<label for="shopStplList'+stpltBas.stpltNo+'">[선택]&nbsp;'+stpltBas.stpltNm+'</label>');
							stpltBf.push('	<a href="#agreeView'+stpltBas.stpltNo+'"  class="popup-call agree-view" aria-label="[선택] '+ stpltBas.stpltNm +' 레이어팝업열림" role="button">자세히 보기</a>');
							stpltBf.push('</li>');
						}

					}
				}

				for(var i=0; i < onlineStpltBasList.length; i++) {
					var onlineStpltBas = onlineStpltBasList[i];
					/** 신청서 선택 */
					if("필수" != onlineStpltBas.stplInd) {
						stpltBf.push('<li>');
						stpltBf.push('	<input type="checkbox" id="stplList'+onlineStpltBas.stplCd+'" name="stplList" value="'+onlineStpltBas.stplCd+'" />');
						stpltBf.push('	<label for="stplList'+onlineStpltBas.stplCd+'">[선택]&nbsp;'+onlineStpltBas.stplNm+'</label>');
						stpltBf.push('	<a href="#agreeView'+onlineStpltBas.stplCd+'"  class="popup-call agree-view"  aria-label="[선택] '+ onlineStpltBas.stplNm +' 레이어팝업열림" role="button">자세히 보기</a>');
						stpltBf.push('</li>');
					}

				}

				$("#stpltAgreeList > ul.terms-list-Shop").html(stpltBf.join(''));
				$("#popup-order-raw-detail").html(stpltDtlBf.join(''));
			}

		});

	},

	eSimListGrp : function () {
		controller.ajaxSend({
			cache: false
			, url: '/direct/getEsimListGrp.json'
			, data: ''
			, dataType: 'json'
			, type: 'post'
			, async: true
			, successCall: function (jsonObj) {

				var html = "";
				var duSimMdlId = '';
				var duSimMdlNm = '';
				var tmp = '';
				//초기화
				html += "<option value=''>색상/용량 선택</option>";
				//단품리스트 저장
				for(var i in jsonObj.listSntyInfoGrpByProd){
					html += "<option value="+jsonObj.listSntyInfoGrpByProd[i].duSimMdlId+"|"+jsonObj.listSntyInfoGrpByProd[i].duSimMdlNm+">"+jsonObj.listSntyInfoGrpByProd[i].sntyNm+"</option>";
				}
				$('#sntyInfoSetList').html(html);
			}

		});
	}

});


var checkAge = function(chkAge, chkGbn){
	var rtn = "";
	var varData = controller.getSerializedData({
		 chkAge			   : chkAge,
		 chkGbn			   : chkGbn
	});
	controller.ajaxSend({
	      cache:false
	      ,url:'/smart/checkAge.json'
	      ,data:varData
	      ,dataType:'json'
	      ,type : 'post'
	      ,async:false
	      ,isBlock:false
	      ,successCall:function(jsonObj){
	    	  rtn = jsonObj.errCd;
	      },errorCall:function(jsonObj) {
	    	  rtn = "err";
	      }
	});
	return rtn;
};

function openCreditHomePage(){
	var url = $('#go-homepage').attr('data-homepage');


	//현대카드인 경우 post로 전송
	if($('#creditCompnayCd').val() == 'HD'){
		// 동적 폼 생성
		var $formEle = $('<form action="'+ url +'" method="post" target="_blank"></form>')

		$formEle.append($('#txSyncCd'));
		$formEle.appendTo('body');

		$formEle.submit();
	}else{
		window.open(url,"_blank")
	}
}

function jsonCardEmbedNormal() {

	validator.config = {};
	 // 카드 인증
	var userName = "";
	var encUserName = "";
	var birthDate = "";
	var custJumin = "";
	//var postpayUsimYn = $('#postpayUsimYn').val(); //수정할거임
	var indivInfoCollAgrYn = "Y";
	var identSvcTrmsAgrYn = "Y";
	var uciProcAgrYn = "Y";
	var cdSvcTrmsAgrYn = "Y";

	var custTel = "";
	var encCustTel = "";

	// 홈페이지 인증 분기
	var isHomePageYn = "N";
	var ajaxUrl = "/common/jsonCardEmbedNormal.json";

	if($("#userType").val() == '02') {
		// 값 셋팅
		userName = $("#creditAgntNm").val();
		custJumin = $("#creditAgntSsn").val();
		birthDate = $("#creditAgntSsn").val().substring(0, 6);
		custTel = $("#creditReceiverMobile").val();

	} else {

		// 값 셋팅
		userName = $("#creditUserName").val();
		encUserName = $("#enc_creditUserName").val();
		birthDate = $("#creditCustJumin").val().substring(0, 6);
		custJumin = $("#creditCustJumin").val();
		custTel = $("#creditReceiverMobile").val();
		encCustTel = $("#enc_creditReceiverMobile").val();

	}

	if(!$('#terms-check button.btn').data('card')){
		isHomePageYn = "Y";
		ajaxUrl = "/common/openHomePageAuthPop.json";
		validator.config['cardHomePage'] = 'isNonEmpty';

		if (!validator.validate()) {
			alert(validator.getErrorMsg());
			return false;
		}

	}



	var creditCardNo = getRsaEncData($("#creditCardNo").val());

	if (validator.validate()) {
		controller.ajaxSend({
			cache: false,
			url: ajaxUrl,
			data: controller.getSerializedData({
				userName: getRsaEncData(controller.nvl(userName, ""))
				, enc_ovr_userName : encUserName
				, creditCardNo: creditCardNo
//				, creditExpireDate: getRsaEncData($("#creditExpireDate").val().substring(2, 4)+$("#creditExpireDate").val().substring(0, 2))
//				, creditPass: getRsaEncData($("#creditPass").val())
				, sbscTypeCd: $("#sbscTypeCd").val()
				, birthDate: getRsaEncData(birthDate)
				, custSsn: getRsaEncData(custJumin)
				, userType: $("#userType").val()
				, agntNm: getRsaEncData($.trim(controller.nvl($("#creditAgntNm").val(), "")))
				, custTel : getRsaEncData(custTel)
				, enc_ovr_custTel : encCustTel
				, crdCd : $("#creditCompnayCd").val()
				, crdTpCd : $("#aCardCheck").val() // 일반 : 00, 아멕스 : 01, 다이너스 : 02
				, indivInfoCollAgrYn : indivInfoCollAgrYn
				, identSvcTrmsAgrYn : identSvcTrmsAgrYn
				, uciProcAgrYn : uciProcAgrYn
				, cdSvcTrmsAgrYn : cdSvcTrmsAgrYn
				, homePageId : getRsaEncData($('#cardHomePage').val())
				, isHomePageYn : isHomePageYn
				//, postpayUsimYn: postpayUsimYn
			}),
			dataType: 'json',
			type: 'post',
			async: true,
			isBlock: true,
			isDim: true,
			successCall: function (jsonObj) {
				if (jsonObj.rsltCd == 'T001') {  // 1차 인증성공
					$("#txSeqNo").val(jsonObj.txSeqNo);
					popupClose("#terms-check"); //$("#terms-check").removeClass('active');
					//ars
					popupOpen("#ars-check"); //$("#ars-check").addClass('active');

					if(isHomePageYn == 'Y'){
						var actionUrl = jsonObj.actionUrl;

						//현대카드인 경우 post로 전송
						if(jsonObj.CRD_CD == 'HD'){
							// 동적 폼 생성
							actionUrl = jsonObj.crdCertRqstUrl;
							var $formEle = $('<form action="'+ jsonObj.crdCertRqstUrl +'" method="post" target="_blank"></form>')
							var $inputEle = $('<input type="hidden" name="txSyncCd" value="'+ jsonObj.txSyncCd +'">');

							$formEle.append($inputEle);
							$formEle.appendTo('body');

							$formEle.submit();
						}else{
							window.open(jsonObj.actionUrl,"_blank")
						}
					}


			        return false;
				} else { // 1차 인증 실패
					if($('#terms-check button.btn').data('card')){
						popupClose("#terms-check"); //$("#terms-check").removeClass('active');
						popupOpen("#ars-checkEr"); //$("#ars-checkEr").addClass('active');
					}else{
						// 홈페이지 인증 정보
						alert('인증에 실패하였습니다.');
					}
				    return false;

				}
			}, errorCall: function (jsonObj) {
				if (jsonObj.responseCode == "X0054") {
					location.href = "/main.do";
				}
			}
		});
	} else {
		alert(validator.getErrorMsg());
	} // validator.validate() end


}

function jsonCardEmbedResult() {
	 // 카드 인증
	var userName = "";
	var encUserName = "";
	var birthDate = "";
	var custJumin = "";
	var custTel = "";
	var encCustTel = "";
	var isHomePageYn = "N";

	if($("#userType").val() == '02') {

		// 값 셋팅
		userName = $("#creditAgntNm").val();
		custJumin = $("#creditAgntSsn").val();
		birthDate = $("#creditAgntSsn").val().substring(0, 6);
		custTel = $("#creditReceiverMobile").val();
	} else {

		// 값 셋팅
		userName = $("#creditUserName").val();
		encUserName = $("#enc_creditUserName").val();
		custJumin = $("#creditCustJumin").val();
		custTel = $("#creditReceiverMobile").val();
		encCustTel = $("#enc_creditReceiverMobile").val();
		birthDate = $("#creditCustJumin").val().substring(0, 6);
		var creditCardNo = getRsaEncData($("#creditCardNo").val());
	}


	if(!$('#terms-check button.btn').data('card')){
		isHomePageYn = "Y";
	}


	if (validator.validate()) {
		controller.ajaxSend({
			cache: false,
			url: '/common/jsonCardEmbedResult.json',
			data: controller.getSerializedData({
				txSeqNo: $("#txSeqNo").val()
			  , crdCd : $("#creditCompnayCd").val()
			  , creditExpireDate: getRsaEncData(1234)
			  , custSsn: getRsaEncData(custJumin)
			  , userType: $("#userType").val()
			  , agntNm: getRsaEncData($.trim(controller.nvl($("#creditAgntNm").val(), "")))
			  , userName: getRsaEncData(controller.nvl(userName, ""))
			  , enc_ovr_userName : encUserName
			  , creditCardNo: creditCardNo
			  , birthDate: getRsaEncData(birthDate)
			  , custTel : getRsaEncData(custTel)
			  , enc_ovr_custTel : encCustTel
			  , isHomePageYn : isHomePageYn
			}),
			dataType: 'json',
			type: 'post',
			async: true,
			isBlock: true,
			isDim: true,
			successCall: function (jsonObj) {
				var failMsg = "인증이 완료되지 않았습니다 ARS인증을 완료 해주세요.";
				var popupId = "#popup-ars";

				if(!$('#terms-check button.btn').data('card')){
					failMsg = "인증이 완료되지 않았습니다. 홈페이지 인증 후 재시도 해주세요.";
					popupId = "#popup-homepage-regi";
				}



				if (jsonObj.rsltCd == 'T000') {  // 차 인증성공

					if('Y' == $("#sharingYn").val()){

						jsonKtsCustSvcList();

					}else{

						if('Y' == $('#befIntmUsimUseYn').val()){
							jsonPostOpenLimitCnt();
						}

						alert("인증이 완료되었습니다.");
						popupClose(popupId);
						popupClose("#ars-check"); // $("#ars-check").removeClass('active');
						// 인증성공시 다음페이지 이동


						if(!$('#terms-check button.btn').data('card')){ //홈페이지 인증인 경우
							$("a[name=selRdFeePay][rdfeepayck=A]").parent().hide();
							$('a[name=selRdFeePay][rdfeepayck=C]').trigger('click'); //타 신용카드
						}else{
							$('a[name=selRdFeePay][rdfeepayck=A]').trigger('click'); //인증 신용카드
							$("#feeCardNumTemp").val($("#creditCardNoTemp").val()+"(MMS명세서)");
							$("#feeCardNum").val($("#creditCardNo").val());

							$("#rcvmtrPrsnCntplc").val($("#creditReceiverMobile").val());
						}

						goToNextSwiper($('#creditCompnay').val());

					}

				} else if(jsonObj.rsltCd == 'T100') {
					if(!$('#terms-check button.btn').data('card')){
						failMsg = "인증이 완료되지 않았습니다. 홈페이지 인증 후 재시도 해주세요.";
						popupClose('#popup-homepage-regi');
						popupOpen('#popup-homepage-id');
					}

		       		alert(failMsg);
		       	} else {
		       		if($('#terms-check button.btn').data('card')){
		       			alert("인증한 정보가 정확하지 않습니다. 다시 확인해 주세요.");
					} else {
		       			if(jsonObj.rsltCd == '3333'){
		       				failMsg = "주민등록번호가 일치하지 않습니다.";
							popupClose('#popup-homepage-regi');
							popupOpen('#popup-homepage-id');
		       			}else{
		       				failMsg = "인증이 완료되지 않았습니다. 홈페이지 인증 후 재시도 해주세요.";
							popupClose('#popup-homepage-regi');
							popupOpen('#popup-homepage-id');
		       			}
					}

		       		popupClose("#ars-check"); // $("#ars-check").removeClass('active');
				}


			}, errorCall: function (jsonObj) {
				if (jsonObj.responseCode == "X0054") {
					location.href = "/main.do";
				}
			}
		});
	} else {
		alert(validator.getErrorMsg());
	} // validator.validate() end


}


//보유회선 목록조회
function jsonKtsCustSvcList() {
	popupClose("#ars-check"); // $("#ars-check").removeClass('active');
	popupClose('#number-search');

	var custTel = "";
	var encCustTel = "";
	var userType = $("#userType").val();
	var userName = $("#creditUserName").val();
	var encUserName = $("#enc_creditUserName").val();
	var custJumin = $("#creditCustJumin").val();

	if($("#userType").val() == '02') {

		//alert("미성년자 고객은 데이터쉐어링 서비스를 가입하실 수 없습니다");
		//location.href = "https://direct.kt.com/direct/directShare.do";

		custTel = $("#sharingMainPhoneNo").val(); //미성년자일 경우, 본인번호 넘겨야함.

	} else {

		if("PASS_ACCOUNT" == $("#certType").val()){
			custTel = $("#passAccountReceiverMobile").val();
		}else if("NAVER" == $("#certType").val()){
			custTel = $("#naverReceiverMobile").val();
		}else{
			custTel = $("#creditReceiverMobile").val();
			encCustTel = $("#enc_creditReceiverMobile").val();
		}

		$("#sharingMainPhoneNo").val(custTel);

	}

	if (validator.validate()) {
		loadOneBlock();
		controller.ajaxSend({
			cache: false,
			url: '/direct/jsonKtsCustSvcList.json',
			data: controller.getSerializedData({
			   custTel : custTel
			   , enc_ovr_custTel : encCustTel
			   , userType : userType
			   , userName : getRsaEncData(controller.nvl(userName, ""))
			   , enc_ovr_userName : encUserName
			   , custSsn: getRsaEncData(custJumin)
			}),
			dataType: 'json',
			type: 'post',
			async: true,
			isBlock: true,
			isDim: true,
			successCall: function (jsonObj) {

				if(jsonObj.custSvcContInfoDtoListSize == 0){
					alert("조회하신 휴대폰번호로 데이터쉐어링 서비스를 가입하실 수 없습니다.");
					location.href = "/directMain.do";

				}else{
					if('Y' == jsonObj.sharingCk){
						// 성공창이동
						var arrPplGroupCd5g = jsonObj.pplGroupCd5g.split(",");

						var pplId5G = "0801";
						var pplIdLte = "0800";

						/*if ("LOCAL" == $("#SERVER_NAME").val() || "DEV" == $("#SERVER_NAME").val()) {

							pplIdLte = "0798";
							pplId5G = "0799";
						}else{
							pplIdLte = "0800";
							pplId5G = "0801";
						}*/

						if(arrPplGroupCd5g.indexOf(jsonObj.chagePplGroupDivCd)>=0) {
							//5g 요금제 세팅

							$("#pplId").val(pplId5G);
							$("#priceCd").val("PL2062523");
							$("#pplNm").val("5G-데이터쉐어링");
							$("#sharingSocNm").text("5G 데이터쉐어링 요금");
							$("#sharingSocW").text("5,000원/월");
//							$(".tab-nav.swiper-wrapper > li > a").text("5G 데이터쉐어링");
						}else{
							//LTE 요금제 세팅
							$("#pplId").val(pplIdLte);
							$("#priceCd").val("PL2062519");
							$("#pplNm").val("LTE-데이터쉐어링");
							$("#sharingSocNm").text("LTE 데이터쉐어링 요금");
							$("#sharingSocW").text("8,250원/월");

							var sharingHtml = "";
							sharingHtml += '<li class="row">';
							sharingHtml += '<span class="td"></span>';
							sharingHtml += '<span class="td">메인 회선에 2대까지 무료제공</span>';
							sharingHtml += '</li>';
							$(".number > li.row:last").after(sharingHtml);

//							$(".tab-nav.swiper-wrapper > li > a").text("LTE 데이터쉐어링");
						}
						$("#chageName").text(jsonObj.chageNm);

//						var mainTel = "000-0000-0000";
//
//						mainTel = $("#sharingMainPhoneNo").val();
//
//						if(mainTel.length == 10) {
//							mainTel = controller.nvl(mainTel.substring(0, 3), "") + "-" + $.trim(mainTel.substring(3, 6)) + "-" + $.trim(mainTel.substring(6, 10));
//						} else {
//							mainTel = controller.nvl(mainTel.substring(0, 3), "") + "-" + $.trim(mainTel.substring(3, 7)) + "-" + $.trim(mainTel.substring(7, 11));
//						}

						if("PASS_ACCOUNT" == $("#certType").val()){
							$("#rcvmtrPrsnCntplc").val($("#passAccountReceiverMobile").val());
						}else if("NAVER" == $("#certType").val()){
							$("#rcvmtrPrsnCntplc").val($("#naverReceiverMobile").val());
						}else{
							$("#rcvmtrPrsnCntplc").val($("#creditReceiverMobile").val());
						}

						$("#mainMobileNum").text(jsonObj.maskSvcNo);
						$("#hopeNumber1").val("0000");
						$("#hopeNumber2").val("0001");

						if("02" == $("#userType").val()){
							if("PASS_ACCOUNT" == $("#certType").val()){
								$("a[name=selRdFeePay][rdfeepayck=A]").parent().hide();
							}else if("NAVER" == $("#certType").val()){
								$("a[name=selRdFeePay][rdfeepayck=A]").parent().hide();
							}else{ //인증을 신용카드로 한 경우(데이터쉐어링은 홈페이지인증 없음)
								$('a[name=selRdFeePay][rdfeepayck=A]').trigger('click'); //인증 신용카드
								$("#feeCardNumTemp").val($("#creditCardNoTemp").val()+"(MMS명세서)");
								$("#feeCardNum").val($("#creditCardNo").val());
							}
							$("#sharing-type1").hide();
							$("#sharing-type2").show();
						}else{
							$("#sharing-type1").show();
							$("#sharing-type2").hide();
						}

						if('02' != $("#userType").val()){
							$("#rdFeePay").val("B"); //통합청구
						}
						$("#zipCd").val(jsonObj.newZipCd);  //jsonObj.arnoAdrZipCd
						$("#mailAdr").val(jsonObj.arnoAdrBasSbst);
						$("#addrDetail").val(jsonObj.arnoAdrDtlSbst);
						$("#dtlAdr").val(jsonObj.arnoAdrDtlSbst);
						//console.log("jsonObj.arnoAdrZipCd==" + jsonObj.arnoAdrZipCd);
						//console.log("jsonObj.newZipCd==" + jsonObj.newZipCd);


						goToNextSwiper($('#creditCompnay').val());

					}else{
						if(confirm('조회하신 휴대폰번호로 데이터쉐어링 서비스를 가입하실 수 없습니다. 다시 조회해주세요') == false){
							location.href = "/directMain.do";
						}else{
							// 재조회 팝업 오픈
							$("#sharingMainPhoneNo").val("");
							popupOpen('#number-search');
						}
					}

					//2021.12.06 보유 회선 목록 array.push
					getDisireService(jsonObj);
					loadOneUnBlock();
					//2021.12.08 요금제는 합산청구로 변경해주기
					$("#rdFeePay").val("B");

				}

			}, errorCall: function (jsonObj) {
				loadOneUnBlock();
				alert("조회하신 휴대폰번호로 데이터쉐어링 서비스를 가입하실 수 없습니다.");
				location.href = "/directMain.do";
			}
		});
	} else {
		alert(validator.getErrorMsg());
	} // validator.validate() end


}


var setHopeNoList = function (objList, objPage) {
	var ilTag = '';
	if (null != objList) {
		var $noList = $('#select-number div div ul');
		$noList.html('');
		for (var i = 0; i < objList.length; i++) {
//			ilTag = '<li><input type="radio" name="rdoHopeNo" id="' + objList[i].svcNo + '" /><label for="' + objList[i].svcNo + '">' + objList[i].svcNo + '</label></li>';
			ilTag = '<li><span class="radio"><label for="' + objList[i].svcNo + '">' + objList[i].svcNo + '</label><input type="radio" name="rdoHopeNo" id="' + objList[i].svcNo + '" ></span></li>';
			$noList.append(ilTag);
		}
		curPage = objPage;
		$("#btnHopeNoPrev").removeAttr("disabled");
		$("#btnHopeNoNext").removeAttr("disabled");
		if ('0' === objPage || '' === objPage) {
			$("#btnHopeNoPrev").attr("disabled", "disabled");
		}
		if (objList.length < 12) {
			$("#btnHopeNoNext").attr("disabled", "disabled");
		}
//		$("#ResultNone").hide();
//		$(".pageBtn").show();
//		$("#NumberSelect ul").show();
//		$("#NumberSelect .hopeSelect").show();
//		$("#NumberSelect .pageBtn").show();
	}
};



function doOrder() {

	var applDataForm = APPL_DATA_FORM();
	var prodCtgCd = $("#prodCtgCd").val();
	var passCk = "NO";
	validator.config = {};

	applDataForm.pageId = $("#pageId").val();

    /*
     * 	1. 고객정보
     */
	var userName = "";
	var encUserName = "";
	var birthDate = "";
	var custSsn = "";
	var authType = $("#certType").val();
	var encCustTel = $("#enc_creditReceiverMobile").val();
	var encDivCustTel = $("#enc_divCreditReceiverMobile").val();

	userName = $("#creditUserName").val();
	encUserName = $("#enc_creditUserName").val();
	birthDate = $("#creditCustJumin").val().substring(0, 6);
	custSsn = $("#creditCustJumin").val();

	applDataForm.birthDate = getRsaEncData(birthDate);


	if("05" == $("#userType").val()) {
		applDataForm.issDateVal = getRsaEncData($("#creditIssDateVal").val());
		applDataForm.nationalityCd = getRsaEncData($("#creditNationalityCd").val());
	}

	//이메일 주소
	if($("#rdFeeList").val() == 'CB'){
		validator.config['billEmailAddr'] = 'isNonEmpty';
		applDataForm.custEmlShop = $.trim($('#billEmailAddr').val());
		applDataForm.custEml = $.trim($('#billEmailAddr').val());
		$("#custEmlShop").val(applDataForm.custEmlShop);
	}else{
//		validator.config['custEml'] = 'isNonEmpty';
		applDataForm.custEmlShop = "";
		$("#custEmlShop").val(applDataForm.custEmlShop);
	}

	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}

    /*
     * 	2. 고객정보
     */
	validator.config = {};

	// 홈페이지 인증일 경우, 수령인 연락처를 연락처에 넣어줌
	if ("CREDIT_CARD" == authType){
		if($("#creditReceiverMobile").val() == "" && !$('#terms-check button.btn').data('card')){
			$("#creditReceiverMobile").val($("#rcvmtrPrsnCntplc").val());
		}
	}

	var prodCtgCd = $("#prodCtgCd").val();
	//데이터 쉐어링이 아닐때만 유효성 체크
	if('Y' != $("#sharingYn").val()){
		validator.config['zipCd'] = 'isNonEmpty';
		validator.config['mailAdr'] = 'isNonEmpty';

		validator.config['creditUserName'] = 'isNonEmpty';
		if ($("#rcvmtrPrsnCntplc").val().indexOf("*") < 0) {
			validator.config['rcvmtrPrsnCntplc'] = 'isNumBetterFixN10';
		}

		if (!validator.validate()) {
			alert(validator.getErrorMsg());
			return;
		}
	}


	applDataForm.hndsetDlvrFrml = $('#hndsetDlvrFrml').val(); //배송방식(택배,방문,퀵배송) : HNDSET_DLVR_FRML
	applDataForm.dlvrRgnAdrsZipNo = controller.nvl($("#zipCd").val(), ""); //배송지 우편번호 : DLVR_RGN_ADRS_ZIP_NO
	applDataForm.dlvrRgnAdrs = controller.nvl($("#mailAdr").val(), ""); //배송지 주소 : DLVR_RGN_ADRS
	applDataForm.dlvrRenMntAdrs = controller.nvl($("#dtlAdr").val(), ""); //배송지 나머지주소  :DLVR_REN_MNT_ADRS
	if ("02" == $("#userType")) {//미성년자
		applDataForm.agntZipNo = $("#zipCd").val(); //법정대리인 우편번호 : AGNT_ZIP_NO
		applDataForm.agntAdrs = $("#mailAdr").val(); //법정대리인 배송지 주소 : AGNT_ADRS
		applDataForm.agntMntAdrs = $("#dtlAdr").val(); //법정대리인 배송지 나머지주소  : AGNT_MNT_ADRS
	}
	applDataForm.dlvrRgnBunji = ""; // 배송지주소 번지수 #######신규##########
	// 배송지주소 구주소('N')/신주소('Y') 구분값 #######신규##########

	applDataForm.dlvrRgnGusinYn = "Y";


	var tel = "00-0000-0000";
	if($("#rcvmtrPrsnCntplc").val().length == 10) {
		tel = controller.nvl($("#rcvmtrPrsnCntplc").val().substring(0, 3), "") + "-" + $.trim($('#rcvmtrPrsnCntplc').val().substring(3, 6)) + "-" + $.trim($('#rcvmtrPrsnCntplc').val().substring(6, 10));
	} else {
		tel = controller.nvl($("#rcvmtrPrsnCntplc").val().substring(0, 3), "") + "-" + $.trim($('#rcvmtrPrsnCntplc').val().substring(3, 7)) + "-" + $.trim($('#rcvmtrPrsnCntplc').val().substring(7, 11));
	}

	// 수령인 연락처 입력제한 처리
	var hpCheck = $("#rcvmtrPrsnCntplc").val().substring(3, 4);
	if (hpCheck == '0' || hpCheck == '1') {
		$("#rcvmtrPrsnCntplc").focus();
		alert("유효하지 않은 연락처입니다. 올바른 연락처를 입력해주세요");
		$("#rcvmtrPrsnCntplc").val('');
		return;
	}

	// 핸드폰 및 집전화 구분이 없어졌으니, 모두 넣기
	if(/^(010|011|016|017|018|019)/gi.test(tel)) {
		applDataForm.cntpntAgtNm = getRsaEncData(tel); //수령인 핸드폰번호 : CNTPNT_AGT_NM
		applDataForm.custPrttlpNo = getRsaEncData(tel);
		applDataForm.rcvmtrPrsnCntplc = getRsaEncData(tel); //수령인연락처 : RCVMTR_PRSN_CNTPLC
		if (tel.indexOf("*") > -1) {
			applDataForm.enc_ovr_cntpntAgtNm = encDivCustTel;
			applDataForm.enc_ovr_custPrttlpNo = encDivCustTel;
			applDataForm.enc_ovr_rcvmtrPrsnCntplc = encDivCustTel;
		}

		applDataForm.custCntplc = "00-0000-0000";
	} else {
		applDataForm.cntpntAgtNm = "00-0000-0000"; //수령인 핸드폰번호 : CNTPNT_AGT_NM
		applDataForm.custPrttlpNo = "00-0000-0000";
		applDataForm.rcvmtrPrsnCntplc = "00-0000-0000"; //수령인연락처 : RCVMTR_PRSN_CNTPLC

		applDataForm.custCntplc = getRsaEncData(tel);
		if (tel.indexOf("*") > -1) {
			applDataForm.enc_ovr_custCntplc = encDivCustTel;
		}
	}

	applDataForm.emlBiltZipNo = applDataForm.dlvrRgnAdrsZipNo;
	applDataForm.emlBiltAdrs = applDataForm.dlvrRgnAdrs;
	applDataForm.emlBiltMntAdrs = applDataForm.dlvrRenMntAdrs;
	applDataForm.emlBiltGusinYn = applDataForm.dlvrRgnGusinYn;

	applDataForm.rcvmtrPrsnNm = $.trim(controller.nvl($("#creditUserName").val(), userName)); //수령인명 : RCVMTR_PRSN_NM
	applDataForm.enc_ovr_rcvmtrPrsnNm = $.trim(encUserName); //수령인명 : RCVMTR_PRSN_NM

	var custMemo = "";
//	if ($.trim($("#custMemo").val()) != "한글 50자까지 입력이 가능합니다.") {
//		custMemo = $.trim($("#custMemo").val());
//	}
	applDataForm.custMemo = custMemo; //배송시 요청사항 : CUST_MEMO
	applDataForm.memoCd = controller.nvl($("#memoCd").val(),"4");


	if (applDataForm.custCntplc.length < 5) {
		applDataForm.custCntplc = "00-0000-0000";
	}

	if (applDataForm.custPrttlpNo.length < 5) {
		applDataForm.custPrttlpNo = "010-0000-0000";
	}

	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}


	validator.config = {};
	if($('#duSimGbnCd').val()=='E'){
		//유효성 검사 end
		applDataForm.custUsimNo = "";
		applDataForm.duSimGbnCd = "E";
		applDataForm.duSimMdlId = $('#duSimMdlId').val();
		applDataForm.duSimMdlNm = $('#duSimMdlNm').val();
		applDataForm.duSimSntyNm = $('#duSimSntyNm').val();
		applDataForm.duSimEid = $('#duSimEid').val();
		applDataForm.duSimMainImei = $('#duSimMainImei').val();
		applDataForm.duSimDegitalImei = $('#duSimDegitalImei').val();
		applDataForm.usimCostInfo = 'U004';

		if ($('#duSimMdlId').val() == '') {
			alert('eSIM 개통할 핸드폰 선택해 주세요.');
			$('#duSimMdlId').focus();
			return;
		}

		validator.config['duSimEid'] = 'isNonEmpty';
		validator.config['duSimMainImei'] = 'isNonEmpty';
		validator.config['duSimDegitalImei'] = 'isNonEmpty';
		validator.config['duSimEid'] = 'isNumber';
		validator.config['duSimMainImei'] = 'isNumber';
		validator.config['duSimDegitalImei'] = 'isNumber';

		if (!validator.validate()) {
			alert(validator.getErrorMsg());
			return;
		}
		if($("#duSimEid").val().length != 32) {
			alert('32자리 숫자로 입력해 주시기 바랍니다.');
			$('#duSimEid').focus();

			return;
		}
		if($("#duSimMainImei").val().length != 15) {
			alert('15자리 숫자로 입력해 주시기 바랍니다.');
			$('#duSimMainImei').focus();

			return;

		}
		if($("#duSimDegitalImei").val().length != 15) {
			alert('15자리 숫자로 입력해 주시기 바랍니다.');
			$('#duSimDegitalImei').focus();

			return;
		}

	}else if('Y' == $("#sharingYn").val()){ // sharing
		applDataForm.duSimGbnCd = "S";
		validator.config['usimSeq'] = 'isNumFix13';
		var custUsimNo = '898230' + $('input[name=usimSeq]').val();
			applDataForm.custUsimNo = custUsimNo;
			applDataForm.duSimGbnCd = "S";
			applDataForm.duSimEid = "";
			applDataForm.duSimMainImei = "";
			applDataForm.duSimDegitalImei = "";
			applDataForm.usimCostInfo = 'U004';

		if (!validator.validate()) {
			alert(validator.getErrorMsg());
			return;
		}

		if ($('#usimCertYn').val() != 'Y') {
			alert('유심카드번호 유효성 검사를 해주세요.');
			return;
		}
	}else if($('#befIntmUsimUseYn').val()=='N'){
		applDataForm.duSimGbnCd = "G";
		applDataForm.usimCostInfo = 'U002';
	}else{
		validator.config['usimSeq'] = 'isNumFix13';

		var custUsimNo = '898230' + $('input[name=usimSeq]').val();
			applDataForm.custUsimNo = custUsimNo;
			applDataForm.duSimGbnCd = "U";
			applDataForm.duSimEid = "";
			applDataForm.duSimMainImei = "";
			applDataForm.duSimDegitalImei = "";
			applDataForm.usimCostInfo = 'U004';

		if (!validator.validate()) {
			alert(validator.getErrorMsg());
			return;
		}

		if ($('#usimCertYn').val() != 'Y') {
			alert('유심카드번호 유효성 검사를 해주세요.');
			return;
		}

	}

	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}

    /*
     * 	희망번호 유효성 체크
     */
	validator.config = {};

	//신규가입
	if ($("#sbscTypeCd").val() == '01') {

		if ($('input[name="txtHopeNoSearch"]').length > 0) {
			if ("Y" == $("#selfYn").val()) {
				validator.config['rsrvSvcNo'] = 'isNonEmpty';
				if (!validator.validate()) {
					if ($.trim($('#NumberSelect div ul').html()) == "") {
						alert("희망번호를 조회하여 선택해주시기 바랍니다.");
						$("#btnHopeNoSearch").focus();
						return;
					}
					if ($("#rsrvSvcNo").val() == "") {
						alert("희망번호를 선택하여 주시기 바랍니다.");
						$("#btnHopeNoReserve").focus();
						return;
					}
					return;
				}

				applDataForm.prfrRankDn = $.trim($('#rsrvSvcNo').val());
				applDataForm.nextRankDn = "0000";
				applDataForm.rsrvSvcNo = $.trim($('#rsrvSvcNo').val());
				applDataForm.rsrvSvcNoDivCd = "F" + $.trim($('#keepPeriod').val());
			} else {
				if('N' == $("#sharingYn").val()){
					if ($("#hopeNumber1").length > 0) {
						validator.config['hopeNumber1'] = 'isNumFix4';
						validator.config['hopeNumber2'] = 'isNumFix4';
						validator.config['hopeNumber1&hopeNumber2'] = 'isNotEquals';
						validator.config['hopeNumber1'] = 'isNumber';
						validator.config['hopeNumber2'] = 'isNumber';


						applDataForm.prfrRankDn = $.trim($('#hopeNumber1').val());
						applDataForm.nextRankDn = $.trim($('#hopeNumber2').val());
					}
				}
				//validator.config['txtHopeNoSearch'] = 'isNonEmpty';
				/*if ($('#NumberSelect div ul li input:radio[name=rdoHopeNo]').is(':checked')) {
					applDataForm.prfrRankDn = $.trim($('#NumberSelect div ul li input:radio[name=rdoHopeNo]:checked').prop("id")).replace(/-/gi, '');
				} else {
					applDataForm.prfrRankDn = $.trim($('#txtHopeNoSearch').val());
				}
				applDataForm.nextRankDn = "0000";*/
			}
		}
	}

	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}

	//번호이동
	if ($("#sbscTypeCd").val() == '02') {
		validator.config['mobileNum'] = 'isNumBetterFixN10';
		validator.config['certifyWay'] = 'isNonEmpty';

		// 지로인 경우 내용안받음
		var athnItemCd = $("#certifyWay").val();
		setMoveAlertMsg();
		if (athnItemCd != "1") {
			validator.config['nowPrttlpMsn'] = 'isNonEmpty';
			validator.config['nowPrttlpMsn'] = 'isNumFix4';
		}

		applDataForm.mnpNowSbsTlcm = $("#mnpNowSbsTlcm").val();
		applDataForm.usimPymnCd = $("#usimPymnCd").val();
		if($("#mobileNum").val().length == 10) {
			applDataForm.nowPrttlpNo = $.trim($("#mobileNum").val().substring(0, 3)) + "-" + $.trim($("#mobileNum").val().substring(3, 6)) + "-" + $.trim($("#mobileNum").val().substring(6, 10));
		} else {
			applDataForm.nowPrttlpNo = $.trim($("#mobileNum").val().substring(0, 3)) + "-" + $.trim($("#mobileNum").val().substring(3, 7)) + "-" + $.trim($("#mobileNum").val().substring(7, 11));
		}
		applDataForm.mnpAthnCd = $.trim($("#certifyWay").val());
		applDataForm.nowPrttlpMsn = $.trim($("#nowPrttlpMsn").val());

		//번호변경 신청정보 약관 - 잔여청구요금 납부방법, 환금액 요금상계
		if ($("input[name='shopStplList'][value='58']").is(':checked')) {
			applDataForm.yetBillStlmMthdCd = "4";
		} else {
			applDataForm.yetBillStlmMthdCd = "3";
		}
		applDataForm.rpymAmntYn = "Y";
	}

	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}

	//요금명세서 및 납부 방법
	if ($("#rdFeePay").val() != 'B') {//합산청구가 아닌경우만
		//요금명세서
		if ($("#rdFeeList").length > 0) {
			validator.config['rdFeeList'] = 'isNonEmpty';
		}
		applDataForm.rqsshtMthdCd = $("#rdFeeList").val();

		if (applDataForm.rqsshtMthdCd == "CB") {
			applDataForm.securEmlRqsshtYn = "Y";
			// DR-2018-21955 명세서 관련 개선요청 으로 체크박스가 제거되어 무조건 Y로 값 세팅
			applDataForm.emlBiltAgreYn = "Y";
		} else {
			if ($("#selfYn").val() == 'Y') {
				applDataForm.custEml = applDataForm.custEmlShop;
			}
		}
	}

	//납부방법
	validator.config['rdFeePay'] = 'isNonEmpty';
	applDataForm.feeBlpymMthd = $("#rdFeePay").val();

	validator.config = {};

	switch (applDataForm.feeBlpymMthd) {
		case 'C':
			//신용카드
			var crdtCardExpirationDate = '';

			if("C" == $("#rdFeePayCk").val()){

				validator.config['feeCardNumCg'] = 'isNumBetterFixN14';
				validator.config['feeCardDateCg'] = 'isNumFix4';
				validator.config['feeCardAgree'] = 'isNonEmpty';
				crdtCardExpirationDate = $("#feeCardDateCg").val();
				applDataForm.feeBlpymBnkacn = getRsaEncData($.trim($("#feeCardNumCg").val()));
				applDataForm.crdtCardExpirationDate = crdtCardExpirationDate;
				if ($("#feeCardAgree").is(":checked")) {
					applDataForm.awdrAgreYn = "Y";
				} else {
					applDataForm.awdrAgreYn = "N";
				}
				break;

			}else{

				validator.config['feeCardNum'] = 'isNumBetterFixN14';
				validator.config['feeCardDate'] = 'isNumFix4';
				validator.config['feeCardAgree'] = 'isNonEmpty';
				crdtCardExpirationDate = $("#feeCardDate").val();
				applDataForm.feeBlpymBnkacn = getRsaEncData($.trim($("#feeCardNum").val()));
				applDataForm.crdtCardExpirationDate = crdtCardExpirationDate;
				if ($("#feeCardAgree").is(":checked")) {
					applDataForm.awdrAgreYn = "Y";
				} else {
					applDataForm.awdrAgreYn = "N";
				}
				break;
			}

		case 'D':
			//자동이체
			validator.config['feeBank'] = 'isNonEmpty';
			validator.config['feeAccount'] = 'isNumBetterFixN10';
			validator.config['feeCardAgree'] = 'isNonEmpty';

			applDataForm.feeBlpymBankNm = $("#feeBankCd").val();
			applDataForm.feeBlpymBankCd = $("#nstepValue").val();
			applDataForm.feeBlpymBnkacn = $.trim($("#feeAccount").val());
			if ($("#feeCardAgree").is(":checked")) {
				applDataForm.awdrAgreYn = "Y";
			} else {
				applDataForm.awdrAgreYn = "N";
			}
			break;
		case 'B':
			//합산청구
			var feeSum = $('#feeSum').val();
			applDataForm.feeBlpymBankNm = feeSum;

			var feeMobile = "010-0000-0000";
			var encFeeMobile = "";

			if("PASS_ACCOUNT" == $("#certType").val()){
				feeMobile = $("#passAccountReceiverMobile").val();
			}else if("NAVER" == $("#certType").val()){
				feeMobile = $("#naverReceiverMobile").val();
			}else{
				feeMobile = $("#creditReceiverMobile").val();
				encFeeMobile = $("#enc_divCreditReceiverMobile").val();
			}

			if(feeMobile.length == 10) {
				feeMobile = controller.nvl(feeMobile.substring(0, 3), "") + "-" + $.trim(feeMobile.substring(3, 6)) + "-" + $.trim(feeMobile.substring(6, 10));
			} else {
				feeMobile = controller.nvl(feeMobile.substring(0, 3), "") + "-" + $.trim(feeMobile.substring(3, 7)) + "-" + $.trim(feeMobile.substring(7, 11));
			}

			applDataForm.feeBlpymBnkacn = feeMobile;
			applDataForm.enc_ovr_feeBlpymBnkacn = encFeeMobile;
			applDataForm.awdrAgreYn = "";
			break;
		default:

	}


	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}


	validator.config = {};

	applDataForm.nowSbsTlcm = 'R000';
	applDataForm.isVipPpl = 'N';
	applDataForm.evtVipPack = 'N';

	var tempSvcCd = "";

	applDataForm.vbsList = tempSvcCd;

    /*
     * 	6. 본인인증
     */

	validator.config = {};


	if ("02" == $("#userType").val()) {
		// 인증방법
		var authType = $("#certType").val();
		var agntNm = "";
		var agntSsn = "";
		var agntRltn = "";
		var agntCntplc = "";
		agntNm = $("#creditAgntNm").val();
		agntSsn = $("#creditAgntSsn").val();
		agntRltn = $("#creditAgntRltn").val();

		if("PASS_ACCOUNT" == authType) {
			agntCntplc = $("#passAccountReceiverMobile").val();
		}else if("NAVER" == authType){
			agntCntplc = $("#naverReceiverMobile").val();
		}else{
			agntCntplc = $("#creditReceiverMobile").val();
		}
		applDataForm.agntNm = getRsaEncData(agntNm);
		applDataForm.agntBirth = getRsaEncData(agntSsn.substring(0, 6));
		applDataForm.agntSsn = getRsaEncData(agntSsn);
		applDataForm.agntRltn = agntRltn;


		//법정대리인 본인확인 > 연락처
		if(agntCntplc.length == 10) {
			applDataForm.agntCntplc = getRsaEncData(agntCntplc.substring(0, 3) + "-" + agntCntplc.substring(3, 6) + "-" + agntCntplc.substring(6, 10));
			applDataForm.harmInfoTel = getRsaEncData(agntCntplc.substring(0, 3) + "-" + agntCntplc.substring(3, 6) + "-" + agntCntplc.substring(6, 10));
		} else {
			applDataForm.agntCntplc = getRsaEncData(agntCntplc.substring(0, 3) + "-" + agntCntplc.substring(3, 7) + "-" + agntCntplc.substring(7, 11));
			applDataForm.harmInfoTel = getRsaEncData(agntCntplc.substring(0, 3) + "-" + agntCntplc.substring(3, 7) + "-" + agntCntplc.substring(7, 11));
		}

		applDataForm.subagnAgtNm = "Y";
	}

	if (authType == "CREDIT_CARD"){
		if($('#terms-check button.btn').data('card')){
			if("Y" == $("#bCardCheck").val()){
				validator.config['creditCardNo'] = 'isNumBetterFixN14';
			}
		}
	}

	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}

	/** [번호이동 셀프] - 사전동의 체크 */
	if ($("#sbscTypeCd").val() == '02') {
		if ($("#selfYn").val() == "Y") {
			if (!PRE_CHK_SEND_FLAG) {
				alert("번호이동 사전동의를 진행하시기 바랍니다.");
				return;
			}
		}

		applDataForm.rsrvSvcNo = controller.nvl($("#rsrvSvcNo").val(), $("#mobileNum").val());	// 번호이동 예약번호
		applDataForm.npCustTypeCd = controller.nvl($("#npCustTypeCd").val(), "01");				// 번호이동 고객유형 (01:개인)
		applDataForm.prfrRankDn = controller.nvl($("#rsrvSvcNo").val(), $("#mobileNum").val());	// 번호이동 우선순위 가입자번호
		applDataForm.nextRankDn = "0000";														// 번호이동 다음 가입자번호
	}

	var tempSvcCd = "";

	//부가서비스
	if ($('input[name=isFreePpl]').val() == 'true') {
		tempSvcCd += "MEDIAHSPK,";
	}

	//기기변경이 아닐경우, 스마트기기/패드/에그류일경우 부가상품 자동가입 - 데이터 전용 단말 통보 서비스
    /**
     * 데이터투게더 Watch 요금제 가입 시 해당 부가서비스 가입 없음
     */
	if ($("#SBSC_TYPE_CD_CHANGE_DEVICE").val() != $("#sbscTypeCd").val() && "0756" != $("#pplId").val()) {
		var prodCtgCd = $("#prodCtgCd").val();
		if (prodCtgCd == '12' || prodCtgCd == '16' || prodCtgCd == '17' || prodCtgCd == '18' || prodCtgCd == '19' || prodCtgCd == '29' || prodCtgCd == '34') {
			tempSvcCd += "IPADSM,";
		}
	}

	//Y24ON 수능요금제인 경우 부가서비스 자동가입처리
	if ("0764" == $("#pplId").val()) { //프리미엄요긎제
		tempSvcCd += "MEDIAPKFR,"; //미디어팩 자동가입
	} else if ("0762" == $("#pplId").val() || "0763" == $("#pplId").val()) { //비디오,톡 요금제
		tempSvcCd += "OLHTVDYBD,"; //모바일데일리팩 자동가입
	}
	if($("#priceCd").val()=='5GINTMPP6'){
		tempSvcCd += "5GDTRM150,";
	}
	if($("#priceCd").val()=='5GINTMPP4'){
		tempSvcCd += "5GDTRM100,";
	}
	if($("#priceCd").val()=='5GINTMPP3'){
		tempSvcCd += "5GDTRM080,";
	}

	// 5G Y 슈퍼플랜 스페셜 데이터로밍 자동가입
	if($("#priceCd").val()=='PL19CB587'){
		tempSvcCd += "PL19CB592,";
	}
	// 5G Y 슈퍼플랜 스페셜 데이터로밍 자동가입(요금제 코드변경)
	if($("#priceCd").val()=='PL2172636'){
		tempSvcCd += "PL2179647,";
	}
	// 5G Y 슈퍼플랜 베이직 데이터로밍 자동가입
	if($("#priceCd").val()=='PL19CB588'){
		tempSvcCd += "PL19CB593,";
	}
	// 5G Y 슈퍼플랜 베이직 데이터로밍 자동가입(요금제 코드변경)
	if($("#priceCd").val()=='PL2172635'){
		tempSvcCd += "PL2179646,";
	}
	// 5G Y 슬림 데이터로밍 자동가입
	if($("#priceCd").val()=='PL19CB590'){
		tempSvcCd += "PL19CB595,";
	}
	// 5G 데이터투게더 부가서비스 자동가입
	if($("#priceCd").val()=='PL19C4537') {
		tempSvcCd += "PL19C4554,";
	}
	// 슈퍼플랜 프리미엄 초이스(시즌/지니), 슈퍼플랜 스페셜 초이스(시즌/지니) 부가서비스 자동가입
	if ("0827" == $("#pplId").val() || "0828" == $("#pplId").val()) { // 슈퍼플랜 프리미엄 초이스(시즌/지니), 슈퍼플랜 스페셜 초이스(시즌/지니)
		tempSvcCd += "PL2175638,";
	}

	// 5G 슈퍼플랜 초이스(디즈니)일 경우 부가서비스 추가
	if($("#pplId").val()=='0840'||$("#pplId").val()=='0841'||$("#pplId").val()=='0842') {
		if($("#pplId").val() == '0840'||$("#pplId").val() == '0841') { // 슈퍼플랜 프리미엄, 스페셜 초이스(디즈니)
			tempSvcCd += "PL218N874,PL2196935,PL2026807,";
		} else if($("#pplId").val() == '0842') { // 슈퍼플랜 베이직 초이스(디즈니)
			tempSvcCd += "PL2196935,";
		}
	}

	// 5G 슈퍼플랜 플러스 요금제 선택후 시즌박스 부가서비스 데이터를 선택한경우
	if ($("#seeznAddVbs").val()) {
		var seeznArry = $("#seeznAddVbs").val().split(",");
		var devStr = $("#SERVER_NAME").val();
		if (seeznArry != null && seeznArry.length > 0) {
			var pplId = $('#pplId').val();

			/**
			 * 넷플릭스+현대카드+(시즌/지니)+바디프랜드+에어팟+디즈니 요금제일 경우 시즌초이스 메인 부가서비스 제외
			 * 대신 군인요금제가 출시될 시 다시 개발 필요
			 */
			if(pplId != '0809' && pplId != '0810' && pplId != '0811' && pplId != '0830'
					&& pplId != '0823' && pplId != '0824' && pplId != '0825'&& pplId != '0831' /* 현대카드 */
					&& pplId != '0827'&& pplId != '0828'&& pplId != '0829' /* 시즌/지니 */
					&& pplId != '0834'&& pplId != '0835'&& pplId != '0836' /* 바디프랜드 */
					&& pplId != '0837'&& pplId != '0838' /* 에어팟 */
					&& pplId != '0840'&& pplId != '0841'&& pplId != '0842' /* 디즈니 */ ) {
				if(pplId == '0789') { // 신군인 77요금제이면
					tempSvcCd += "PL2026802,PL2026807,";
				} else if(pplId == '0790') { // 신군인 55요금제이면
					tempSvcCd += "PL2033961,PL2026807,";
				} else if( ("DEV" == devStr ? "0813" : "0817" == pplId) || ("DEV" == devStr ? "0814" : "0818" == pplId) || ("DEV" == devStr ? "0815" : "0819" == pplId)) { // Y's 무약정요금제
					tempSvcCd += "PL19BT530,";
				} else {
					// 1. 시즌박스 목 부가서비스 생성 (미디어팩5.0)
					if($("#priceCd").val()=='PL202I867'){
						tempSvcCd += "PL2033961,";
					} else {
						tempSvcCd += "PL2026802,";
					}
				}

				// 2. 시즌박스 옵션 부가서비스 입력 (PL2026803 지니, PL2026803 지니, PL2026805
				// VR)
			}

			// 5G 슈퍼플랜 초이스(현대카드)일 경우 부가서비스 추가
			if($("#pplId").val()=='0824'||$("#pplId").val()=='0825'||$("#pplId").val()=='0831') {
				if(pplId == '0825'||pplId == '0831') { // 슈퍼플랜 프리미엄 초이스(현대카드)
					tempSvcCd += "PL2033961,PL2026807,";
				} else if(pplId == '0824') { // 슈퍼플랜 스페셜 초이스(현대카드)
					tempSvcCd += "PL2033961,PL2026807,";
				}
			}

			// 5G 슈퍼플랜 초이스(바디프랜드)일 경우 부가서비스 추가 - 베이직 제외
			if($("#pplId").val()=='0834'||$("#pplId").val()=='0835') {
				tempSvcCd += "PL2033961,PL2026807,";
			}

			// 5G 슈퍼플랜 초이스(에어팟)일 경우 부가서비스 추가 - 베이직 제외
			if($("#pplId").val()=='0837'||$("#pplId").val()=='0838') {
				tempSvcCd += "PL2033961,PL2026807,PL219G971,";
			}

			for (var i=0; i<seeznArry.length; i++) {
				if (seeznArry[i]) {
					tempSvcCd += seeznArry[i]+",";
				}
			}
		}

		// 넷플릭스 요금제 선택후 넷플릭스 초이스 부가서비스 데이터를 선택한경우
		if(seeznArry.indexOf("PL208Q984")!="-1"||seeznArry.indexOf("PL208R990")!="-1"||seeznArry.indexOf("PL208R991")!="-1"||seeznArry.indexOf("PL208R989")!="-1"){
			var netflixPriPplId = "DEV" == devStr ? "0810" : "0809";
			var netflixSpePplId = "DEV" == devStr ? "0809" : "0810";
			var netflixBacPplId = "DEV" == devStr ? "0808" : "0811";

			if($("#pplId").val()== netflixPriPplId){ //5G 슈퍼플랜 프리미엄 초이스(넷플릭스)일 경우 부가서비스 추가
				tempSvcCd += "PL209A143,PL2026807,PL208R989,";
			}else if($("#pplId").val()== netflixSpePplId){ //5G 슈퍼플랜 스페셜 초이스(넷플릭스)일 경우 부가서비스 추가
				tempSvcCd += "PL208R993,PL2026807,PL208Q983,";
			}else if($("#pplId").val()== netflixBacPplId){ //5G 슈퍼플랜 베이직 초이스(넷플릭스)일 경우 부가서비스 추가
				tempSvcCd += "PL208R992,PL208Q983,";
			}
		}else if($("#netflixAddVbs").val()){
			tempSvcCd += $("#netflixAddVbs").val()+","; // 1개이기때문에 바로 추가

			var devStr = $("#SERVER_NAME").val();
			var netflixPriPplId = "DEV" == devStr ? "0810" : "0809";
			var netflixSpePplId = "DEV" == devStr ? "0809" : "0810";
			var netflixBacPplId = "DEV" == devStr ? "0808" : "0811";

			if($("#pplId").val()== netflixPriPplId){ //5G 슈퍼플랜 프리미엄 초이스(넷플릭스)일 경우 부가서비스 추가
				tempSvcCd += "PL209A143,PL2026807,PL208R989,";
			}else if($("#pplId").val()== netflixSpePplId){ //5G 슈퍼플랜 스페셜 초이스(넷플릭스)일 경우 부가서비스 추가
				tempSvcCd += "PL208R993,PL2026807,PL208Q983,";
			}else if($("#pplId").val()== netflixBacPplId){ //5G 슈퍼플랜 베이직 초이스(넷플릭스)일 경우 부가서비스 추가
				tempSvcCd += "PL208R992,PL208Q983,";
			}
		}
	}else if($("#netflixAddVbs").val()){
		tempSvcCd += $("#netflixAddVbs").val()+","; // 1개이기때문에 바로 추가

		var devStr = $("#SERVER_NAME").val();
		var netflixPriPplId = "DEV" == devStr ? "0810" : "0809";
		var netflixSpePplId = "DEV" == devStr ? "0809" : "0810";
		var netflixBacPplId = "DEV" == devStr ? "0808" : "0811";

		if($("#pplId").val()== netflixPriPplId){ //5G 슈퍼플랜 프리미엄 초이스(넷플릭스)일 경우 부가서비스 추가
			tempSvcCd += "PL209A143,PL2026807,PL208R989,";
		}else if($("#pplId").val()== netflixSpePplId){ //5G 슈퍼플랜 스페셜 초이스(넷플릭스)일 경우 부가서비스 추가
			tempSvcCd += "PL208R993,PL2026807,PL208Q983,";
		}else if($("#pplId").val()== netflixBacPplId){ //5G 슈퍼플랜 베이직 초이스(넷플릭스)일 경우 부가서비스 추가
			tempSvcCd += "PL208R992,PL208Q983,";
		}
	}

	applDataForm.vbsList = tempSvcCd;

	// 5G 무약정플랜 슬림 요금제는 Y할인 프로모션 미적용
	if("DEV" == devStr ? "0815" : "0819" == $('#pplId').val()) {
		applDataForm.dcPplIdYn = "Y";
	}else{
		applDataForm.dcPplIdYn = "N";
	}

    /*
     * 	7. 약관정보
     */

	validator.config = {};

	validator.config['shopStplList'] = 'isArryChecked';
	validator.config['stplList'] = 'isArryChecked';

	if ($("#nonMemPw").length > 0) {
		validator.config['nonMemPw'] = 'isNonPassWord';
		validator.config['nonMemPw2&nonMemPw'] = 'isEquals';
		applDataForm.nonMemPw = $("#nonMemPw").val();
	}

	var tempStplList = "";
	var tempShopStplList = "";
	$("input[name='shopStplList']").each(function () {
		if ($(this).is(':checked')) {
			var tempVal = $(this).val();
			if (tempVal != "") {
				tempShopStplList += $(this).val() + ",";
			}
		}
	});

	$("input[name='stplList']").each(function () {
		if ($(this).is(':checked')) {
			var tempVal = $(this).val();
			if (tempVal != "") {
				tempStplList += $(this).val() + ",";
			}
		}
	});

	applDataForm.stplList = tempStplList;
	applDataForm.shopStplList = tempShopStplList;

	if ("02" == $("#userType").val()) {
		applDataForm.nworkHarmBlock = "Y";			// SHOP관리 54번 약관으로 대체 - 02-08
		applDataForm.harmInfoCutCd = "KIDSAFELH";	//KT자녀폰안심 프리-앱차단(무료/안드로이드폰전용) 상품 디폴트가입처리.
	}

	//통신과금서비스
	if ($("[name='shopStplList'][value='59']").length > 0) {
		if ($("[name='shopStplList'][value='59']").is(":checked")) {
			applDataForm.prttlpUseStlmAgreYn = "Y";
		} else {
			applDataForm.prttlpUseStlmAgreYn = "N";
		}
	}

	/*
	if($("#befIntmUsimUseYn").val() == 'Y' && $("#sbscTypeCd").val()=='01'){ //바로개통이고 신규인 경우 강제로 값 설정하여 전달.
		applDataForm.prttlpUseStlmAgreYn = "N";
	}
	*/

	//무선데이터서비스
	if ($("button[name=wrlsDataSvcUseYn]:visible").length > 0) {
		applDataForm.wrlsDataSvcUseYn = $("button[name=wrlsDataSvcUseYn].current").attr("val");
	}

	//추천인 정보
	applDataForm.encrPrsnId = $.trim($('#certEmpNo').val());
	applDataForm.encrPrsnNm = $.trim($('#certEmpName').val());
	applDataForm.sptrId = $.trim($('#certSptrEmpNo').val());
	applDataForm.sptrNm = $.trim($('#certSptrEmpName').val());

	applDataForm.custNm = $.trim(userName); //가입자 명 : CUST_NM
	applDataForm.enc_ovr_custNm = $.trim(encUserName); //가입자 명 : CUST_NM
	applDataForm.custSsn = getRsaEncData(custSsn); //가입자 주민번호 KM_PWD_CRYPT_FUNC() : CUST_SSN 신규/번이 신규 가상화 처리필요
	//상품정보 .. FCD
	applDataForm.prdcSrlNo = $("#prdcSrlNo").val();
	//요금제 SOC
	applDataForm.priceCd = $("#priceCd").val();
	applDataForm.chargeCd = $("#priceCd").val();
	applDataForm.shpmlOrderNo = ""; // 주문번호

	applDataForm.sbscTypeCd = $("#sbscTypeCd").val(); // 가입유형

	/** 주문 정보 쌓기 */
	applDataForm.vndrNo = $("#vndrNo").val();
	applDataForm.prodNo = $("#prodNo").val();
	applDataForm.sntyNo = $("#sntyNo").val();
	applDataForm.vndrSntyNo = $("#vndrSntyNo").val();
	applDataForm.pplId = $("#pplId").val();
	applDataForm.buyTypeCd = "01";
	applDataForm.inslMonsTypeCd = $("#inslMonsTypeCd").val();
	applDataForm.svcEngtMonsTypeCd = $("#svcEngtMonsTypeCd").val();
	applDataForm.monthBillAmt = $("#monthBillAmt").val();
	applDataForm.inslThecpt = $("#inslThecpt").val();
	applDataForm.supportType = controller.nvl($("#supportType").val(), "");
	applDataForm.punoSuprtAmt = controller.nvl($("#punoSuprtAmt").val(), "0");
	applDataForm.starPoint = $("#starPoint").val();
	applDataForm.changePoint = $("#changePoint").val();
	applDataForm.simplePoint = $("#simplePoint").val();
	applDataForm.greenPhonePoint = $("#greenPhonePoint").val();
	applDataForm.giftishowAmt = $("#giftishowAmt").val();
	applDataForm.smartGiftAmt = $("#smartGiftAmt").val();
	applDataForm.cntryLovePoint = controller.nvl($("#cntryLovePoint").val(), "0");
	applDataForm.custDivCd = $("#custDivCd").val();
	applDataForm.drRecpAgncyCd = $("#drRecpAgncyCd").val();
	applDataForm.userName = controller.nvl(userName, "");
	applDataForm.enc_ovr_userName = controller.nvl(encUserName, "");
	applDataForm.userType = controller.nvl($("#userType").val(), "");
	applDataForm.rsrvProdYn = $("#rsrvProdYn").val();
	applDataForm.encGiftishowSeq = $("#encGiftishowSeq").val();
	applDataForm.encSmartGiftSeq = $("#encSmartGiftSeq").val();
	applDataForm.pointParkSettlAmt = $("#pointParkSettlAmt").val();
	applDataForm.pointParkAthnNo = $("#pointParkAthnNo").val();
	applDataForm.pointParkRqtNo = $("#pointParkRqtNo").val();
	applDataForm.mpointAplyAmt = $("#mpointAplyAmt").val();
	applDataForm.mpointMid = $("#mpointMid").val();
	applDataForm.mpointAplyYn = $("#mpointAplyYn").val();
	applDataForm.cultureAmt = $("#cultureAmt").val();
	applDataForm.mobilId = $("#mobilId").val();
	applDataForm.hndsetCd = "";
	applDataForm.hndsetModelNm = $("#hndsetModelNm").val();
	applDataForm.hndsetNm = $("#hndsetModelNm").val();
	applDataForm.imei = $("#imei").val();
	applDataForm.macAddr = $("#macAddr").val();
	applDataForm.hndsetSeq = $("#hndsetSeq").val();
	applDataForm.hndsetSrlNo = $("#hndsetSeq").val();
	applDataForm.encSrlNoUrlEncode = $("#encSrlNoUrlEncode").val(); // 예판
	applDataForm.rsrvSalePosblYn = $("#rsrvSalePosblYn").val(); // 예판
	applDataForm.accProdOfferList = $("#accProdOfferList").val(); // 엑세사리 오퍼
	applDataForm.reserveOrderYn = $("#reserveOrderYn").val();
	applDataForm.spongePlanYn = $("#spongePlanYn").val();
	applDataForm.rndUid = $("#rndUid").val();
	applDataForm.showChDivCd = getShowChDivCd();

	// 포인트파크
	applDataForm.pntParkSrlNo = $("#pntParkSrlNo").val();
	applDataForm.pntParkAmnt = $("#pntParkAmnt").val();
	applDataForm.pntParkTypeCd = $("#pntParkTypeCd").val();
	applDataForm.pntPark2SrlNo = $("#pntPark2SrlNo").val();
	applDataForm.pntPark2Amnt = $("#pntPark2Amnt").val();
	applDataForm.pntPark2TypeCd = $("#pntPark2TypeCd").val();
	applDataForm.pntPark3SrlNo = $("#pntPark3SrlNo").val();
	applDataForm.pntPark3Amnt = $("#pntPark3Amnt").val();
	applDataForm.pntPark3TypeCd = $("#pntPark3TypeCd").val();
	applDataForm.pntPark4SrlNo = $("#pntPark4SrlNo").val();
	applDataForm.pntPark4Amnt = $("#pntPark4Amnt").val();
	applDataForm.pntPark4TypeCd = $("#pntPark4TypeCd").val();
	applDataForm.pntPark5SrlNo = $("#pntPark5SrlNo").val();
	applDataForm.pntPark5Amnt = $("#pntPark5Amnt").val();
	applDataForm.pntPark5TypeCd = $("#pntPark5TypeCd").val();

	//m샵 ini용
	applDataForm.ordrNo = $("#ordrNo").val();

	applDataForm.dealerCd = $("#dealerCd").val();
	applDataForm.dealerNm = $("#dealerNm").val();
	applDataForm.openCntpntCd = $("#openCntpntCd").val();
	applDataForm.lowVndrNo = $('#lowVndrNo').val();

	applDataForm.combCnslgApyProdNoList = "";
	applDataForm.time24OpnTgtYn = "N";

	// 혜택
	applDataForm.bnfitApyTxnArray = $("#bnfitApyTxnArray").val();
	applDataForm.benefitSpecialArrayA = $("#benefitSpecialArrayA").val();
	applDataForm.benefitSpecialArrayB = $("#benefitSpecialArrayB").val();
	applDataForm.benefitSpecialArrayC = $("#benefitSpecialArrayC").val();
	applDataForm.benefitSpecialArrayD = $("#benefitSpecialArrayD").val();
	applDataForm.benefitSpecialCdX = $("#benefitSpecialCdX").val();
	applDataForm.benefitSpecialNmX = $("#benefitSpecialNmX").val();

	if ($("input[name='cmbnDcCd']:checked").length > 0) {
		applDataForm.cmbnDcCd = $("input[name='cmbnDcCd']:checked").val();
	}
	applDataForm.smartIntmChageDcSbscYn = 'N';

	if ($('#kosUseYn').val() == 'N') {
		if ($('#smartIntmCheck').val() == 'N') {
			applDataForm.smartIntmCheck = 'N';
		} else {
			applDataForm.smartIntmCheck = 'Y';
		}
	}

	if ($('#hasLogin').val() == "true" && $('#dataShareLayer').length > 0) {
		if ($('#repNo').val() != '' && $('#repNo').val() != undefined && $('#repNo').val() != null) {
			applDataForm.repNo = $('#repNo').val();
		}
		if ($('#billAccId').val() != '' && $('#billAccId').val() != undefined && $('#billAccId').val() != null) {
			applDataForm.billSaId = $('#billAccId').val();
		}
	}
	//2021.12.09 데이터 쉐어링 셀프 탈때 billAccId 값 신청서에 넣어주기
	if ('Y' == $("#sharingYn").val()){
		applDataForm.billSaId = $('#billAccId').val();
	}
	if ($('#kosUseYn').val() == 'N') {
		if ($('#dataShareCheck').val() == 'N') {
			applDataForm.dataShareCheck = 'N';
		} else {
			if ($('#dataShareYn').val() == 'Y') {
				applDataForm.dataShareCheck = 'Y';
			} else {
				applDataForm.dataShareCheck = 'N';
			}
		}
	}

	if (validator.validate()) {

//		var inslThecpt = $("#inslThecpt").val(); // 할부원금
//		var inslMonsTypeCd = $("#inslMonsTypeCd").val(); // 할부개월
//		var INSL_MONS_TYPE_CD_PAY = $("#INSL_MONS_TYPE_CD_PAY").val();
//
//		// KT통합청구 선택 시
//		if ($("#rdFeePay").val() == 'B') {
//			if (!isDoCertFee || $("#billSaId").val() == '') {
//				alert("통합청구 명의자 확인을 클릭하세요.");
//				$("#feeMobile3").focus();
//				return;
//			}
//			applDataForm.billSaId = $("#billSaId").val();
//		}

		if ($("#paymentType").val() != '') {
			applDataForm.paymentType = $("#paymentType").val();
		}

		// 주문주소 LOG 셋팅
		applDataForm.encZipCd = getRsaEncData($("#zipCd").val());
		applDataForm.encRoadAddrType = ""; //뭔지 몰라서 일단 빈값
		applDataForm.encMailAdr = getRsaEncData($("#mailAdr").val());
		applDataForm.encDtlAdr = getRsaEncData($("#dtlAdr").val());
		applDataForm.ordrAddrBtnType = $("input[name=specification02]:checked").next("label").text();

		applDataForm.selfYn = $("#selfYn").val();
		applDataForm.certType = $("#certType").val(); // 인증유형

		if($('#duSimGbnCd').val()=='E' && $("#selfYn").val()=='Y'){
			applDataForm.selfYn = $("#duSimSelf").val();
			$("#selfYn").val($("#duSimSelf").val());
		}else{
			applDataForm.selfYn = $("#selfYn").val();
		}

		applDataForm.noPplId = $("#noPplId").val();        		 //기존요금제
		applDataForm.subscriptionId = $("#subscriptionId").val();//기존요금제 계약번호
		applDataForm.encSvcContId = $("#encSvcContId").val();

		var sharingTel = $("#sharingMainPhoneNo").val();

		if('Y' == $("#sharingYn").val()){
			var sharingMemo = "쉐어링 모회선 요금제: " + $("#chageName").text() + " / 쉐어링 모회선 요금제코드: " + $("#priceCd").val() + " / 쉐어링 모회선 번호: sharePhoneNo";
			applDataForm.onfrmMemoSbst = sharingMemo;
			applDataForm.SharingMainPhoneNo = sharingTel; 			//데이터쉐어링 메인회선 번호
			if (sharingTel.indexOf("*") > -1) {
				applDataForm.enc_ovr_SharingMainPhoneNo = encCustTel;
			}
			applDataForm.mainSvcContId =$("#mainSvcContId").val();
			applDataForm.mainSvcNo =$("#mainSvcNo").val();
		}
		applDataForm.sharingYn = $("#sharingYn").val();

		applDataForm.unlimitVoiceChkSussYn = $("#unlimitVoiceChkSussYn").val();
		applDataForm.unlimitVoiceChkFailNo = $("#unlimitVoiceChkFailNo").val();

		applDataForm.chargeCd = $("#chargeCd").val();

		applDataForm.rentalTypeCd = $("#rentalTypeCd").val();
		applDataForm.salePlcyId = $("#salePlcyId").val();

		applDataForm.watchCertYn = $("#watchCertYn").val();
		applDataForm.watchCertMphonNo = $("#watchCertMphonNo").val();

		applDataForm.vndrCpntCd = $("#vndrCpntCd").val();
		applDataForm.passCk = passCk;

		/** 주문중단 고객 SEQ */
		applDataForm.ordrStopSeq = controller.nvl($("#ordrStopSeq").val());

		applDataForm.befIntmUsimUseYn = $('#befIntmUsimUseYn').val();

		applDataForm.affiliateCorpCd = $('#affiliateCorpCd').val();
		applDataForm.affiliatePackAmt = $('#affiliatePackAmt').val();

		//대리점 사은품 정보
//		if($("button[name='orderBenefitNm']").length > 0){
//			if($("button[name='orderBenefitNm'].current").length == 0){
//				alert(VALIDATE_NOT_EMPTY_MSG.orderBenefitNm);
//				return;
//			}
//			var orderBenefitNm = $("button[name='orderBenefitNm'].current");
//			var makrNm = orderBenefitNm.attr("makrNm");
//			var brandNm = orderBenefitNm.attr("brandNm");
//			applDataForm.orderBenefitNm = makrNm+"/"+orderBenefitNm.attr("sntyNm");
//		}

		/** 외부채널 구분코드 */
		applDataForm.channel = controller.nvl($("#channel").val());

		var varData = controller.getSerializedData(applDataForm);

		if (controller.isOverlap) {
			alert("주문 진행중입니다.");
		}
		controller.isOverlap = true;
		$("#btnOrder").hide();

		controller.ajaxSend({
			cache: false
			, url: '/direct/saveDirectUsimOrder.json'
			, data: varData
			, dataType: 'json'
			, async: true
			, isBlock:true
			, successCall: function (jsonObj) {
				controller.isOverlap = false;

				var ordrNo = jsonObj.ordrNo;
				var postpayUsimYn = jsonObj.postpayUsimYn;
				var selfFlag = jsonObj.selfFlag;
				var semiSelfYn = jsonObj.semiSelfYn;
				var userType = $("#userType").val();
				var dscnOptnCd = $("#dscnOptnCd").val();
				var path = '';
				if (postpayUsimYn == 'Y') {
					path = "/direct/directOpening.do?ordrNo=" + ordrNo + "&selfFlag=" + selfFlag + "&semiSelfYn=" + semiSelfYn + "&userType=" + userType + "&encNonMemKey=" + encodeURIComponent(jsonObj.encNonMemKey) + "&dscnOptnCd=" + dscnOptnCd;
				}else if("Y" == $("#sharingYn").val()){
					path = "/direct/DirectUsimOrderCompleteView.do?ordrNo=" + ordrNo + "&selfFlag=" + selfFlag + "&semiSelfYn=" + semiSelfYn + "&userType=" + userType + "&encNonMemKey=" + encodeURIComponent(jsonObj.encNonMemKey) + "&dscnOptnCd=" + dscnOptnCd + "&sharingYn=" + $("#sharingYn").val();
				}else{
					path = "/direct/DirectUsimOrderCompleteView.do?ordrNo=" + ordrNo + "&userType=" + userType + "&encNonMemKey=" + encodeURIComponent(jsonObj.encNonMemKey) + "&dscnOptnCd=" + dscnOptnCd + "&inChkType=" + $("#inChkType").val() + "&sharingYn=" + $("#sharingYn").val();
				}
				document.lastFrm.action = path;
				document.lastFrm.submit();
				//location.href = path;

			}
			, errorCall: function (jsonObj) {
				$("#btnOrder").show();
				controller.isOverlap = false;
				if (jsonObj.responseCode == undefined) {
					var errorMsg = '';
					if (jsonObj.status == '0') {
						errorMsg = '네트워크 에러입니다. 통신연결 상태를 확인하세요';
					} else {
						errorMsg = '서버 에러입니다. 관리자에게 문의해 주시기 바랍니다.';
					}
					alert(errorMsg);
				} else {
					if ("W0029" == jsonObj.responseCode || "W0055" == jsonObj.responseCode) {
						history.back();
					} else if ("W0112" == jsonObj.responseCode || "W0061" == jsonObj.responseCode) {
						location.href = jsonObj.redirectUrl;
					}
				}
			}
		});

	} else {
		alert(validator.getErrorMsg());
		return;
	}
	return;
}

function goPopup(){
	// 주소검색을 수행할 팝업 페이지를 호출합니다.
	// 호출된 페이지(jusopopup.jsp)에서 실제 주소검색URL(http://www.juso.go.kr/addrlink/addrLinkUrl.do)를 호출하게 됩니다.
	var pop = window.open("/common/JusoController.do","pop","width=570,height=650, scrollbars=yes, resizable=yes");

	// 모바일 웹인 경우, 호출된 페이지(jusopopup.jsp)에서 실제 주소검색URL(http://www.juso.go.kr/addrlink/addrMobileLinkUrl.do)를 호출하게 됩니다.
    //var pop = window.open("/common/JusoController.do","pop","scrollbars=yes, resizable=yes");
}

function setMoveAlertMsg() {
	var athnItemCd = $("#certifyWay").val();
	if (athnItemCd == "2") {
		VALIDATE_NOT_EMPTY_MSG["nowPrttlpMsn"] = "사용중인 핸드폰 일련번호 뒷 4 자리를 입력해 주세요.";
		VALIDATE_NUMBER_MSG["nowPrttlpMsn"] = "사용중인 핸드폰 일련번호를 숫자로 입력해 주세요.";
		VALIDATE_FIX_MSG["nowPrttlpMsn"] = "사용중인 핸드폰 일련번호를 4자리 숫자로 입력해 주세요.";
	} else if (athnItemCd == "3") {
		VALIDATE_NOT_EMPTY_MSG["nowPrttlpMsn"] = "이전 통신사에 요금을 납부중인 은행계좌 번호 뒷 4 자리를 입력해 주세요.";
		VALIDATE_NUMBER_MSG["nowPrttlpMsn"] = "이전 통신사에 요금을 납부중인 은행계좌 번호를 숫자로 입력해 주세요.";
		VALIDATE_FIX_MSG["nowPrttlpMsn"] = "이전 통신사에 요금을 납부중인 은행계좌 번호를 4자리 숫자로 입력해 주세요.";
	} else if (athnItemCd == "5") {
		VALIDATE_NOT_EMPTY_MSG["nowPrttlpMsn"] = "이전 통신사에 요금을 납부중인 신용카드 번호 뒷 4 자리를 입력해 주세요.";
		VALIDATE_NUMBER_MSG["nowPrttlpMsn"] = "이전 통신사에 요금을 납부중인 신용카드 번호로 입력해 주세요.";
		VALIDATE_FIX_MSG["nowPrttlpMsn"] = "이전 통신사에 요금을 납부중인 신용카드 번호를 4자리 숫자로 입력해 주세요.";
	}

}


function jusoCallBack(roadFullAddr,roadAddrPart1,addrDetail,roadAddrPart2,engAddr, jibunAddr, zipNo, admCd, rnMgtSn, bdMgtSn,detBdNmList,bdNm,bdKdcd,siNm,sggNm,emdNm,liNm,rn,udrtYn,buldMnnm,buldSlno,mtYn,lnbrMnnm,lnbrSlno,emdNo){
		// 팝업페이지에서 주소입력한 정보를 받아서, 현 페이지에 정보를 등록합니다.

		$("#zipCd").val(zipNo);
		$("#mailAdr").val(roadAddrPart1);
		$("#dtlAdr").val(addrDetail);
		$("#addrDetail").val(addrDetail);


//		document.form.roadFullAddr.value = roadFullAddr;
//		document.form.roadAddrPart1.value = roadAddrPart1;
//		document.form.roadAddrPart2.value = roadAddrPart2;
//		document.form.addrDetail.value = addrDetail;
//		document.form.engAddr.value = engAddr;
//		document.form.jibunAddr.value = jibunAddr;
//		document.form.zipNo.value = zipNo;
//		document.form.admCd.value = admCd;
//		document.form.rnMgtSn.value = rnMgtSn;
//		document.form.bdMgtSn.value = bdMgtSn;
//		document.form.detBdNmList.value = detBdNmList;
//		/** 2017년 2월 추가제공 **/
//		document.form.bdNm.value = bdNm;
//		document.form.bdKdcd.value = bdKdcd;
//		document.form.siNm.value = siNm;
//		document.form.sggNm.value = sggNm;
//		document.form.emdNm.value = emdNm;
//		document.form.liNm.value = liNm;
//		document.form.rn.value = rn;
//		document.form.udrtYn.value = udrtYn;
//		document.form.buldMnnm.value = buldMnnm;
//		document.form.buldSlno.value = buldSlno;
//		document.form.mtYn.value = mtYn;
//		document.form.lnbrMnnm.value = lnbrMnnm;
//		document.form.lnbrSlno.value = lnbrSlno;
		/** 2017년 3월 추가제공 **/
//		document.form.emdNo.value = emdNo;

}

function cardMsg(obj){
	var temp = obj.closest('li').find('label').text().replace('(필수)','')+'에 동의해 주세요';
	alert(temp)
	obj.focus();
}

/** [번호이동 셀프] - 준셀프처리 */
function setSemiSelfData() {
	// 준셀프 화면 처리
	$(".preAgreBtn").hide();
	$("#preAgreNoti").hide();
	$("#selfYn").val("N");
	$("#hopeNumInArea").show();
	$("#hopeNumSelArea").hide();
}

/** [번호이동 셀프] - 실패케이스 구분 */
function fnFailProcess(resultObj, btnFlag) {
	var sucesYn = resultObj.sucesYn;					// 성공/실패
	var npSndrcvErrCd = resultObj.npSndrcvErrCd;		// 에러 코드
	var errMsg = resultObj.errMsg;						// 에러 메세지
	var dataChangeYn = resultObj.dataChangeYn;			// 입력값 오류로 재입력상황
	var secTimeOutYn = resultObj.secTimeOutYn;			// 10초 타임아웃
	var semiSelfChangeYn = resultObj.semiSelfChangeYn;	// 준셀프 전환여부
	var ordrPosbYn = resultObj.ordrPosbYn;				// 주문 가능여부
	var noSendYn = resultObj.noSendYn;					// 사전동의 미전송
	var posblTimeYn = resultObj.posblTimeYn;			// 가능시간
	var npayAmtYn = resultObj.npayAmtYn;				// 미납금

	if (sucesYn == "Y") {
		return;
	}

	// 준셀프 전환
	if (semiSelfChangeYn == "Y") {
		if (npayAmtYn != "Y") {
			// 개통불가 시간으로인한 준셀프 전환
			if (posblTimeYn == "N") {
				alert("지금은 번호이동 바로개통 가능한 시간이 아닙니다. [사전동의 정보전송], [사전동의 확인] 없이 신청서 작성을 완료해주시면 개통 가능한 시간에 상담원이 연락하여 개통해드리겠습니다.");
			} else {
				alert("번호이동 사전동의 서비스가 원활하지 않습니다. [사전동의 정보전송], [사전동의 확인] 없이 신청서 작성을 완료해주시면 상담원이 연락하여 개통해드리겠습니다.");
			}
		}
		setSemiSelfData();

	// 사전동의 미전송
	} else if (noSendYn == "Y") {
		alert("먼저 [사전동의 정보전송]을 클릭하여 전송 후 사전동의 해 주세요.");
	// 사전동의 미 BUT 문자또는 ARS 미동의 상태
	}else if(noSendYn == "N"){
		alert("문자 또는 ARS로 사전동의 완료후 [사전동의 확인]을 클릭 해 주세요");
		// 지연
	}else if (secTimeOutYn == "Y") {
		alert("사전동의 응답이 지연되고 있습니다. 잠시 후 다시 이용해주세요.");

	// 입력값 불일치
	} else if (dataChangeYn == "Y") {
		var msgStr = "입력하신 번호이동 사전 인증정보(숫자 4자리)가  올바르지 않습니다. 다시 입력해주세요";
		if (npSndrcvErrCd == "BF1004") {
			msgStr = "선택하신 번호이동 인증정보가 올바르지 않습니다. 요금납부 유형확인후 다시 선택해주세요.";
		} else if (npSndrcvErrCd == "BF1005") {
			msgStr = "입력하신 번호이동 인증정보가 올바르지 않습니다. 다시 입력해주세요.";
		} else if (npSndrcvErrCd == "BF2009") {
			msgStr = "선택하신 이전통신사 요금납부 방법이 올바르지 않습니다. 다시 선택해주세요.";
		} else if (npSndrcvErrCd == "BF2012") {
			msgStr = "선택하신 이전통신가 올바르지 않습니다. 다시 선택해주세요";
		}
		// 입력값 재입력
		alert(msgStr); // 입력값 불일치 시 추가로 alert 메세지도 뛰어줌

		movePreAgre_flag = true;

		if (btnFlag != "1") {
			$(".preAgreOk-active").show();
			$("#preAgreNoti").show();
		}

	// 주문 불가
	} else if (ordrPosbYn == "Y") {
		if (npSndrcvErrCd == "BF1000") {
			alert("번호이동 사전동의 서비스가 원활하지 않습니다. [사전동의 정보전송], [사전동의 확인] 없이 신청서 작성을 완료해주시면 상담원이 연락하여 개통해드리겠습니다.");
			setSemiSelfData();
		} else {
			var msgStr = errMsg;
			if (npSndrcvErrCd == "BF1009") {
				msgStr = "신규개통 후 14일 이내로 번호이동이 불가능합니다.";
			} else if (npSndrcvErrCd == "BF1010") {
				msgStr = "해지된 번호로 번호이동이 불가능합니다.";
			}
			msgStr += "\n문의사항이 있으시면 고객센터(1899-8245)로 연락주세요."
			// 입력값 재입력
			alert(msgStr);

			location.href = "/directMain.do";
		}

	// 원인불명 불가
	} else {
		alert(errMsg);
	}
}

function getUserDevice() {
	var device = "PC";
	var arrMobile = [   'iphone'		, 'ipad'			, 'android'		, 'windows ce'	, 'blackberry'
							, 'symbian'	, 'windows phone'	, 'webos'		, 'opera mini'	, 'opera mobi'
							, 'polaris'	, 'iemobile'		, 'lgtelecom'	, 'nokia'		, 'sonyericsson'
							, 'samsung'
						];
	for (var i = 0; i < arrMobile.length; i++) {
		if(navigator.userAgent.toLowerCase().match(arrMobile[i]) != null ) {
			device = "MOBILE";
			break;
		}
	}
	return device;
}
function homePageCardRegi(){

	//디바이스가 pc일 경우
	if(getUserDevice() != 'MOBILE'){
		$('#homepage-id').show();
		var setH = $('.new-contents h1.tit').height() + $('footer').outerHeight() + 10;
		$('.new-contents #content').css('min-height','calc(100% - '+setH+'px)');
	}
}
//약관동의
function checkAuthType(){

	validator.config = {};

	validator.config['shopStplList'] = 'isArryChecked';
	validator.config['stplList'] = 'isArryChecked';

	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}

	if($("#certType").val() != "PASS_ACCOUNT" && $("#certType").val() != "NAVER"){
		if(!$('#chk-popup-card-raw').prop('checked')){
			if(!$('.terms-list:visible input[type=checkbox].card-agree-input-1').is(':checked')){
				cardMsg($('.terms-list:visible input[type=checkbox].card-agree-input-1'))
				return;
			}
			if(!$('.terms-list:visible input[type=checkbox].card-agree-input-2').is(':checked')){
				cardMsg($('.terms-list:visible input[type=checkbox].card-agree-input-2'))
				return;
			}
			if(!$('.terms-list:visible input[type=checkbox].card-agree-input-3').is(':checked')){
				cardMsg($('.terms-list:visible input[type=checkbox].card-agree-input-3'))

				return;
			}
			if(!$('.terms-list:visible input[type=checkbox].card-agree-input-4').is(':checked')){
				cardMsg($('.terms-list:visible input[type=checkbox].card-agree-input-4'))
				return;
			}

			if("SS" == $("#creditCompnay").val()){
				if(!$('.terms-list:visible input[type=checkbox].card-agree-input-5').is(':checked')){
					cardMsg($('.terms-list:visible input[type=checkbox].card-agree-input-5'))
					return;
				}
			}
		}
	}

	if("PASS_ACCOUNT" == $("#certType").val()){

		popupClose("#terms-check");
		passWindow('G');
		//$("a[href='#tab-money-1']").parent().hide();

	}else if("NAVER" == $("#certType").val()){

		popupClose("#terms-check");
		$("#naverIdLogin_loginButton img").click(); //네이버 인증 팝업

	}else if(!$('#terms-check button.btn').data('card')){
		// 신용카드사 아이디 등록일 경우
		//$("a[href='#tab-money-1']").parent().hide();
		popupClose('#terms-check');
		popupOpen('#popup-homepage-regi');
		$('#terms-check button.btn').data('card',false) //default
	}else{

//		validator.config = {};
//		validator.config['shopStplList'] = 'isArryChecked';
//		validator.config['stplList'] = 'isArryChecked';
//
//		if (!validator.validate()) {
//			alert(validator.getErrorMsg());
//			return;
//		}

		jsonCardEmbedNormal();

	}


}

function passWindow(ckGubun){

	validator.config = {};
	var isCheck = false;
	var certType = $("#certType").val();

	if(certType == 'PASS_ACCOUNT'){
		if($('#passAccountReceiverMobile').length>0){
			validator.config['passAccountReceiverMobile'] = 'isNonEmpty';
			validator.config['passAccountReceiverMobile'] = 'isNumber';
		}
	}
//	validator.config['stplList'] = 'isArryChecked';

//	// 약관동의
//	validator.config['shopStplList'] = 'isArryChecked';
//	validator.config['stplList'] = 'isArryChecked';
//
	if (!validator.validate()) {
		alert(validator.getErrorMsg());
		return;
	}

	var plusInfo = "DIRECT"; // 테스트용 구분코드

    var w = 396;
    var h = 644;
    var x = (screen.availWidth - w) / 2;
    var y = (screen.availHeight - h) / 2;

    window.open("",'smsCertPop','scrollbars=no,resizable=no,width='+w+'px,height='+h+'px,left='+x+'px,top='+y+'px');
    controller.createForm({
        id:"viewFrm"
        ,name:"viewFrm"
        ,method:"post"
        ,target:"smsCertPop"
        ,action: '/common/SmsCertInfo.do'
    });
    controller.attachHiddenElement("plusInfo", plusInfo);
    controller.attachHiddenElement("ckGubun", ckGubun);
    controller.attachHiddenElement("userType", $("#userType").val());
    if ("02" == $("#userType").val()) {
	    //controller.attachHiddenElement("postpayUsimYn", $('#postpayUsimYn').val());
	    controller.attachHiddenElement("birthDay", $("#creditAgntSsn").val());
    }

    if ("05" == $("#userType").val()) {
    	controller.attachHiddenElement("nation", "1");
    }

    if(certType=='PASS_ACCOUNT'){
    	controller.attachHiddenElement("sbscTypeCd",getRsaEncData($("#sbscTypeCd").val()));
    	controller.attachHiddenElement("isAccountAuth","Y");
    	controller.attachHiddenElement("phoneNo",getRsaEncData($("#passAccountReceiverMobile").val()));
    	if ("02" == $("#userType").val()) {
    		controller.attachHiddenElement("custSsn",getRsaEncData($("#creditAgntSsn").val()));
    		controller.attachHiddenElement("name",getRsaEncData($("#creditAgntNm").val()));
    	}else{
    		controller.attachHiddenElement("custSsn",getRsaEncData($("#creditCustJumin").val()));
    		controller.attachHiddenElement("name",getRsaEncData($("#creditUserName").val()));
    		controller.attachHiddenElement("enc_ovr_name",$("#enc_creditUserName").val());
    	}
    }

    controller.formSubmit();

}

function passReturn() {

	//$("#rcvmtrPrsnCntplc").val($("#passAccountReceiverMobile").val());
	inputDim("#tab-con11 .pass-padding:eq(0)");
	inputDimClose("#tab-con11 .pass-padding:eq(1)");

	//alert("패스 인증 완료");
}

function accountWindow(){
	  var w = 396;
	  var h = 644;
	  var x = (screen.availWidth - w) / 2;
	  var y = (screen.availHeight - h) / 2;
	  var ckGubun = "G";

		window.open("",'accountAuthPop','scrollbars=no,resizable=no,width='+w+'px,height='+h+'px,left='+x+'px,top='+y+'px');
		controller.createForm({
		id:"viewFrm"
		,name:"viewFrm"
		,method:"post"
		,target:"accountAuthPop"
		,action: '/common/openAccountPop.do'
		});

		controller.attachHiddenElement("sbscTypeCd", $("#sbscTypeCd").val());
		if ("02" == $("#userType").val()) {
			controller.attachHiddenElement("name",getRsaEncData($("#creditAgntNm").val()));
		}else{
			controller.attachHiddenElement("name",getRsaEncData($("#creditUserName").val()));
			controller.attachHiddenElement("enc_ovr_name",$("#enc_creditUserName").val());
		}

		controller.attachHiddenElement("phoneNo",getRsaEncData($("#passAccountReceiverMobile").val()));

	  if ("05" == $("#userType").val()) {
	  	controller.attachHiddenElement("nation", "1");
	  }

	  controller.formSubmit();

}

function accountAuthResult(resultObj){
	if(resultObj.successYn == 'Y'){
		var accountCd = resultObj.accountCd;
		var maskedAccountNo = resultObj.maskedAccountNo;
		var compareBankCd = false;
		ACCOUNT_FALG = true;
		CERT_FLAG = true;
		isCheck = true;
//		$('#accountArea').hide();
//		$('#accountOk').siblings('.ing').hide();
//		$('#accountOk').show();

		//alert("계좌인증이 완료되었습니다.");

		$("#rcvmtrPrsnCntplc").val($("#passAccountReceiverMobile").val());

		if('Y' == $("#sharingYn").val()){

			jsonKtsCustSvcList();

		}else{

			if('Y' == $('#befIntmUsimUseYn').val()){
				jsonPostOpenLimitCnt();
			}

			//$('a[name=selRdFeePay][rdfeepay=D]').trigger('click'); //자동이체

			//납부 정보 세팅
//			$('#select-bank div div li input:radio[name=select-bank]').each(function(){
//				var backval = $(this).attr('nstepvalue');
//				var bankCd = $('input:radio[name=select-bank]:checked').attr("value");
//				var bankNm = $('input:radio[name=select-bank]:checked').attr("bankName");
	//
//				if(backval.indexOf(accountCd) > -1){
//					compareBankCd = true;
//					$(this).trigger('click');
	//
//					$("#nstepValue").val(backval);
//					$("#feeBank").val(bankNm);
//					$("#feeBankCd").val(bankCd);
//					$("#feeAccountTemp").val(maskedAccountNo);
//					$("#feeAccount").val(accountCd);
	//
//				}
//			});

			//controller.showChageInfoDiv();

		}



	}else{
		location.href = '/directMain.do';
	}
}

function jsonPostOpenLimitCnt() {



	if (validator.validate()) {
		controller.ajaxSend({
			cache: false,
			url: '/direct/postOpenLimitCnt.json',
			data: controller.getSerializedData({
				userType : $("#userType").val(),
				custJumin : $("#creditCustJumin").val()
			}),
			dataType: 'json',
			type: 'post',
			async: true,
			isBlock: true,
			isDim: true,
			successCall: function (jsonObj) {

				if(jsonObj.directChkCnt == 1){
					alert("고객님은 최근 30일내 개통 취소 or 개통 해지가 1건 이상으로 가입신청 하시면 상담원이 개통해 드립니다.");
					setSemiSelfData();
				}

			}, errorCall: function (jsonObj) {

				location.href = "/directMain.do";
			}
		});
	} else {
		alert(validator.getErrorMsg());
	} // validator.validate() end


}

//넷플릭스 pplId 체크
function chkNetflixPpl(pplId) {
	var devStr = $("#SERVER_NAME").val().replace('LOCAL', 'DEV');
	var isOSzPpl = false;
	var row = 1;

	/** DEV: 0808(5G 슈퍼플랜 베이직 초이스(넷플릭스)) / 0809(5G 슈퍼플랜 스페셜 초이스(넷플릭스)) / 0810(5G 슈퍼플랜 프리미엄 초이스(넷플릭스)) **/
	/** PRD: 0830(5G 슈퍼플랜 프리미엄 초이스(넷플릭스)) / 0810(5G 슈퍼플랜 스페셜 초이스(넷플릭스)) / 0811(5G 슈퍼플랜 베이직 초이스(넷플릭스)) **/
	var netflixPplId = "DEV" == devStr ? "0808|0809|0810" : "0809|0810|0811|0830";

	var netflixRegx = new RegExp(netflixPplId);

	if (!pplId) {
		return false;
	}

	if (netflixRegx.test(pplId)) {
		isOSzPpl = true;
		row = 1;
	}

	return isOSzPpl;
}


//디즈니 pplId 체크
function chkDisneyPpl(pplId) {
	var devStr = $("#SERVER_NAME").val().replace('LOCAL', 'DEV');
	var isOSzPpl = false;
	var row = 1;

	var disneyPplId = "DEV" == devStr ? "0839|0840|0841" : "0840|0841|0842";

	var disneyRegx = new RegExp(disneyPplId);

	if (!pplId) {
		return false;
	}

	if (disneyRegx.test(pplId)) {
		isOSzPpl = true;
		row = 1;
	}

	return isOSzPpl;
}


// Y's 요금제 확인
function ysPlanConfirm() {
	popupClose('#popup-ys-plan-sale');
	var custNm = $("#creditUserName").val();
	if("02" == $("#userType").val()) {
		custNm = $("#creditAgntNm").val();
	} else {
		custNm = $("#creditUserName").val();
	}
	goToNextSwiper(custNm);
}

// 개인정보 확인 인터페이스 전송
function checkPersonalInfo(){
	var $activeTab = $(".credit-nav > li.active");
	var checkType = $activeTab.attr("snavIdx");
//	console.log("checkType=="+checkType);
	var creditUserName = $('#creditUserName').val();
	var creditCustJumin = $('#creditCustJumin').val();

	// 개인
	var personalIssDate = $("#personalIssDate").val();
	var creditAgntNm = $("#creditAgntNm").val();
	var creditAgntSsn = $("#creditAgntSsn").val();
	var userCertifyChk = $("#userCertifyChk").is(":checked");
	var creditAgntRltn = $("#creditAgntRltn").val();//관계
	//미성년자는 체크안함. 무조건 false
	var parentsChk2 = false;   //$("#parentsChk2").is(":checked");//미성년자 체크

	// 자동차 운전면허
//	var creditUserName2 = $("#creditUserName2").val();
//	var creditCustJumin2 = $("#creditCustJumin2").val();
	var drCountrySelect = $("#drCountrySelect").val();//지역
	var drLicense = $("#drLicense").val();
	var drIssDate = $("#drIssDate").val();
	var userCertifyChk2 = $("#userCertifyChk2").is(":checked");

	// 외국인
//	var creditUserName3 = $("#creditUserName3").val();
//	var creditCustJumin3 = $("#creditCustJumin3").val();
	var creditNationalityCd = $("#creditNationalityCd").val();
	var creditIssDateVal = $("#creditIssDateVal").val();
	var userCertifyChk3 = $("#userCertifyChk3").is(":checked");

	// 신규가입/번호이동
	var sbscTypeCd = $("#sbscTypeCd").val();

	var befIntmUsimUseYn = $("#befIntmUsimUseYn").val();

	var sendData = {
			checkType :checkType
			,sbscTypeCd : sbscTypeCd
			,befIntmUsimUseYn : befIntmUsimUseYn
			,creditUserName : getRsaEncData(creditUserName)
			,creditCustJumin: getRsaEncData(creditCustJumin)

			//개인
			,personalIssDate : getRsaEncData(personalIssDate)
			,creditAgntNm : getRsaEncData(creditAgntNm)
			,creditAgntSsn : getRsaEncData(creditAgntSsn)
			,creditAgntRltn : creditAgntRltn
			,parentsChk2 : parentsChk2

			//운전면허
			,drCountrySelect :drCountrySelect
			,drLicense : getRsaEncData(drLicense)
			,drIssDate: getRsaEncData(drIssDate)
			//외국인
			,creditNationalityCd:creditNationalityCd
			,creditIssDateVal: getRsaEncData(creditIssDateVal)
	};

	var cDate = new Date();
	var currentDate = cDate.format("yyyy") + cDate.format("MM") + cDate.format("dd");
	var age = getAgeByRrn($("#creditCustJumin").val(), currentDate);

	var custNm = $("#creditUserName").val();
	if("02" == $("#userType").val()) {
		custNm = $("#creditAgntNm").val();
	} else {
		custNm = $("#creditUserName").val();
	}

	controller.ajaxSend({
		cache: false,
		url: '/direct/checkPersonalInfo.json',
		data: sendData,
		dataType: "json",
		type: "post",
		async: true,
		isBlock: true,
		isDim: true,

		successCall: function (jsonObj) {
//        	console.log("jsonObj2=="+ JSON.stringify( jsonObj));
        	var resultParam = jsonObj.resultParam;
        	if( resultParam == undefined ){
        		return;
        	}
        	var confirmResult = resultParam.confirmResult;
        	if( confirmResult == undefined){
        		return;
        	}

        	if( confirmResult =="N" ){
        		alert("입력하신 고객정보가 올바르지 않습니다. 다시 확인 후 입력해주세요");
        		return;
        	}else if( confirmResult == "SERVERERR" ){
        		//kait 서버이상이면 준셀프 처리
        		alert("신분증 확인 서비스가 원활하지 않습니다. 신청서 작성을 완료해주시면 상담원이 연락하여 개통해드리겠습니다.");
				setSemiSelfData();
				fnSuccessPersonalInfo();
        	}else if( confirmResult == "Y"){
        		fnSuccessPersonalInfo();
        	}else if( confirmResult == "SECONDERR"){
        		alert("10초후에 다시 시도하여 주십시요");
        		return;
        	}

		}
		 ,errorCall:function(jsonObj) {
			 //console.log("jsonObj==" + JSON.stringify(jsonObj));
			 if( jsonObj.responseCode != null && jsonObj.responseCode != undefined){
				 var responseCode = jsonObj.responseCode;
				 if( responseCode == "X0018"){
					 return;
				 }
			 }
			//kait 서버이상이면 준셀프 처리
			alert("신분증 확인 서비스가 원활하지 않습니다. 신청서 작성을 완료해 주시면 상담원이 연락하여 개통해 드리겠습니다.");
			setSemiSelfData();

			fnSuccessPersonalInfo();

       }
	});
	return true;
}

function fnCreditNavLiClick(arg){
	// 인증강화 3개탭에 대한 클릭이벤트
//	console.log("arg=="+arg);
	/* 개인, 운전면허, 외국인 3개 탭의 id,name을 ~2로 일괄변경후 현재 사용중인 탭만 원래 id로 변경함. */
	//3개 탭 모두 creditUserName -> creditUserName2 로 변경
	$("#tab-userinfo-all").find("[name=creditUserName]").attr("id", "creditUserName2");
	$("#tab-userinfo-all").find("[name=creditUserName]").attr("name", "creditUserName2");
	$("#tab-userinfo-all").find("[name=creditCustJuminTemp]").attr("id", "creditCustJumin2Temp");
	$("#tab-userinfo-all").find("[name=creditCustJuminTemp]").attr("name", "creditCustJumin2Temp");
	$("#tab-userinfo-all").find("#creditCustJumin").attr("id", "creditCustJumin2");

	// 현재 탭 조회
	var $selectTab;
	if(arg=="personal"){
		$selectTab = $("#tab-user-1");
		/*
		var parentsChk2 = $("#parentsChk2").is(":checked");
		if(parentsChk2){
			$("#userType").val("02");
		}else{
			$("#userType").val("01");
		}*/
		$("#userType").val("01");
	}else if(arg=="drive"){
		$selectTab = $("#tab-user-2");
		$("#userType").val("01");
	}else if(arg=="forgn"){
		$selectTab = $("#tab-user-3");
		$("#userType").val("05");
	}

	// 현재 탭 creditUserName2 -> creditUserName 로 변경
	$selectTab.find("[name=creditUserName2]").attr("id", "creditUserName");
	$selectTab.find("[name=creditUserName2]").attr("name", "creditUserName");
	$selectTab.find("[name=creditCustJumin2Temp]").attr("id", "creditCustJuminTemp");
	$selectTab.find("[name=creditCustJumin2Temp]").attr("name", "creditCustJuminTemp");
	$selectTab.find("#creditCustJumin2").attr("id", "creditCustJumin");


}

// 본인인증강화 인터페이스 호출 후 다음 스탭
function fnSuccessPersonalInfo(){

	var cDate = new Date();
	var currentDate = cDate.format("yyyy") + cDate.format("MM") + cDate.format("dd");
	var age = getAgeByRrn($("#creditCustJumin").val(), currentDate);

	var custNm = $("#creditUserName").val();
	if("02" == $("#userType").val()) {
		custNm = $("#creditAgntNm").val();
	} else {
		custNm = $("#creditUserName").val();
	}

	controller.stpltBasList(); //약관

	homePageCardRegi();

	// Y's 요금제 대상자
	var pplId = $("#pplId").val();
	if(isReal) {
		if( age < 30 && ("0817" == pplId || "0818" == pplId) ) {
			popupOpen('#popup-ys-plan-sale');
		} else {
			goToNextSwiper(custNm);
		}
	} else {
		if( age < 30 && ("0813" == pplId || "0814" == pplId) ) {
			popupOpen('#popup-ys-plan-sale');
		} else {
			goToNextSwiper(custNm);
		}
	}

}


//네이버 인증서 결과 확인
var naverCertReturn = function(){
	var result = false;

	var custNm = "";
	var custSsn = "";

	if($("#userType").val() == '02') {
		custNm = $("#creditAgntNm").val();
		custSsn = $("#creditAgntSsn").val();
	} else {
		custNm = $("#creditUserName").val();
		custSsn = $("#creditCustJumin").val();
	}

	var params = {
			 custNm:getRsaEncData(custNm)
			,custSsn:getRsaEncData(custSsn)
			,mobileNo:getRsaEncData($("#naverReceiverMobile").val())
			,sbscTypeCd:getRsaEncData($("#sbscTypeCd").val())
			,prodCtgCd:getRsaEncData($("#prodCtgCd").val())
		}

	controller.ajaxSend({
		cache:false
		,url:"/common/checkNaverCert.json"
		,data:params
		,dataType:"json"
		,async:false
		,isBlock: false
		,successCall:function(jsonObj){

			if(jsonObj.result === "true"){

				if('Y' == $("#sharingYn").val()){
					jsonKtsCustSvcList();
				}else{
					if('Y' == $('#befIntmUsimUseYn').val()){
						jsonPostOpenLimitCnt();
					}

					result = true;
					inputDim("#tab-con16 .pass-padding:eq(0)");

					$("a[name=selRdFeePay][rdfeepayck=A]").parent().hide();
					$('a[name=selRdFeePay][rdfeepayck=C]').trigger('click'); //타 신용카드

					$("#rcvmtrPrsnCntplc").val($("#naverReceiverMobile").val());

					goToNextSwiper('네이버 인증서 인증');

					return;
				}
			} else if(jsonObj.resultMsg){
				alert(jsonObj.resultMsg);
			} else{
				alert("네이버 인증이력 조회에 실패했습니다. 다른 인증방법을 이용해주세요.");
			}
		}
		,errorCall:function(jsonObj){
			alert("네이버 인증이력 조회에 실패했습니다. 다른 인증방법을 이용해주세요..");
		}
	});
	return result;

}

//2021.12.09 회선번호 Push
function getDisireService(jsonObj){
	var disireServiceNumList = new Array();
	var ktCtnList = jsonObj.ktCtnList;
	for (var i =0; i <ktCtnList.length ; i++){

		//2021.12.08 신청서 관련 정보 추가해주기
		var mainSvcNo = jsonObj.ktCtnList[i].svcNo;
		var mainSvcContId = jsonObj.ktCtnList[i].svcContId;
		var billAccId = jsonObj.ktCtnList[i].billAccId;
		//2021.12.07 화면 Push
		var disireServiceNum = ktCtnList[i].svcNo;
		var servicePplGroup = ktCtnList[i].pplGroupDivCd;
		disireServiceNumList.push('<li class="checkbox">');
		disireServiceNumList.push('<input type="radio" id="disireServiceNum'+[i]+'" name="disireServiceNum" value="'+disireServiceNum+'" servicepplGroup='+servicePplGroup+' mainSvcContId='+mainSvcContId+' billAccId='+billAccId+' >');
		disireServiceNumList.push('<label for="disireServiceNum'+[i]+'">');
		disireServiceNumList.push('<span>');
		disireServiceNumList.push(''+disireServiceNum.split("-")[0]+'');
		disireServiceNumList.push('</span>');
		disireServiceNumList.push('<span class="b-txt">');
		disireServiceNumList.push(''+disireServiceNum.split("-")[1]+'');
		disireServiceNumList.push('</span>');
		disireServiceNumList.push('<span>');
		disireServiceNumList.push(''+disireServiceNum.split("-")[2]+'');
		disireServiceNumList.push('</span>');
		disireServiceNumList.push('</label>');
		disireServiceNumList.push('</li>');
	}

	$(".parent-line-search > ul").append(disireServiceNumList.join(''));
}
/**2021.12.07 쉐어링 요금제 선택 영역 show hide처리*/
function getPplDivCd(){
	var pplGroupDivCd = $('[name =disireServiceNum]:checked').attr('servicePplGroup');
	var svcNoIncHyphen = $('[name =disireServiceNum]:checked').val();
	var mainSvcNo = $('[name =disireServiceNum]:checked').val().replace(/-/gi, "");
	var mainSvcContId = $('[name =disireServiceNum]:checked').attr('mainSvcContId');
	var billAccId = $('[name =disireServiceNum]:checked').attr('billAccId');

	var varData = controller.getSerializedData({
		pplGroupDivCd : pplGroupDivCd
	});
	controller.ajaxSend({
		cache: false
		, url: '/direct/getPplDivCd.json'
		, data: varData
		, dataType: 'json'
		, async: true
		, successCall: function (jsonObj) {
			var pplDivCd = jsonObj.pplDivCd;
			if(pplDivCd == "LTE"){
				$("#5GSelect").parent().hide();
				$("#5GNoti").hide();
				$("#5GGuide").hide();
			}else{
				$("#LTESelect").parent().hide();
				$("#LTENoti").hide();
				$("#LTEGuide").hide();
			}
			$('#mainSvcNo').val(mainSvcNo);
			$('#mainSvcContId').val(mainSvcContId);
			$('#billAccId').val(billAccId);
			$("#sharingMainPhoneNo").val(mainSvcNo);
			$("#svcNoIncHyphen").val(svcNoIncHyphen);
		}
		,errorCall:function(){
			alert( '조회중 오류가 발생했습니다.' );
		}
	});
}

/**2021.12.15 다이렉트 샵 인증 화면 default 설정 관련 기능*/
function alignSharing(){
	var sharingYn = $("#sharingYn").val();
	if("N" == sharingYn){
		$('#btn-card').show();
		$('#btn-pass').hide();
		$("#certType").val("CREDIT_CARD");
		//신용카드 인증약관 노출
		$(".terms-list.raw-other").show();
	}else{
		$('#btn-pass').show();
		$('#btn-card').hide();
		$("#certType").val("PASS_ACCOUNT");
		$('#terms-check button.btn').text('확인');
		//신용카드 인증약관 미노출
		$(".terms-list.raw-other").hide();
	}
}

